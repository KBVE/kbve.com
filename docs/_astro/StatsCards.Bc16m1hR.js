import{r as c,j as e}from"./react.CvslfkeK.js";import{u as g}from"./@nanostores.vmeSb_hF.js";import{t as s}from"./tailwind-merge.B9ugUrge.js";import{c as t}from"./clsx.B-dksMZM.js";import{s as z,a as S,u as M,b as T,c as L}from"./userstate.D-HOx8OE.js";import{q as B,r as C,s as U,t as A,u as P,v as E}from"./lucide-react.BVhOvk1k.js";import"./@react-three.B-wTPXHf.js";import"./nanostores.Bo9-_MAV.js";import"./supabaseClient.BwbbkKqX.js";import"./@supabase.aKZxS6oP.js";import"./Page.astro_astro_type_script_index_0_lang.CHoS6oJr.js";import"./react-dom.CtWA3ti2.js";import"./svelte.BEh2_tzM.js";import"./esm-env.rsSWfq8L.js";const X=()=>{const n=g(M),o=g(T),l=g(L),[j,p]=c.useState(!0),[r,y]=c.useState(null),[f,v]=c.useState(!1),a=c.useMemo(()=>!n||!o,[n,o]);c.useMemo(()=>a?"Guest":n?.email?.split("@")[0]||"User",[a,n]),c.useEffect(()=>{z(),o&&S(o)},[o]),c.useEffect(()=>{const d=()=>{const i=document.querySelector('[data-skeleton="stats"]');i instanceof HTMLElement&&(i.style.transition="opacity 0.5s ease-out",i.style.opacity="0"),setTimeout(()=>{v(!0)},100)};(async()=>{try{console.log("Fetching user stats..."),await new Promise(h=>setTimeout(h,800));let i=0;!a&&l&&(i=typeof l=="object"&&"credits"in l?l.credits:typeof l=="number"?l:0);let u="New User";if(!a&&n?.created_at){const h=new Date(n.created_at),m=Math.floor((Date.now()-h.getTime())/(1e3*60*60*24));m<7?u="New User":m<30?u=`${m} days`:m<365?u=`${Math.floor(m/30)} months`:u=`${Math.floor(m/365)} years`}let x="Guest";a||(i>=1e3?x="VIP":i>=500?x="Premium":x="Basic");const b={creditBalance:i,accountAge:u,activityLevel:a?"Low":"Medium",membershipTier:x};console.log("Setting stats:",b),y(b),d(),p(!1)}catch(i){console.error("Error fetching user stats:",i),d(),p(!1)}})()},[n,o,l,a]);const N=c.useMemo(()=>d=>{switch(d){case"VIP":return"text-purple-400";case"Premium":return"text-yellow-400";case"Basic":return"text-green-400";default:return"text-zinc-400"}},[]),w=c.useMemo(()=>d=>{switch(d){case"VIP":return"bg-purple-500/10 border-purple-500/20";case"Premium":return"bg-yellow-500/10 border-yellow-500/20";case"Basic":return"bg-green-500/10 border-green-500/20";default:return"bg-zinc-500/10 border-zinc-500/20"}},[]);return j||!r?null:(console.log("Rendering StatsCards with visible:",f,"stats:",r),e.jsxs("div",{className:s(t("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 transition-opacity duration-500",f?"opacity-100":"opacity-0")),children:[e.jsxs("div",{className:s(t("bg-zinc-800 rounded-lg p-6 border border-zinc-700","hover:border-cyan-500/50 transition-colors group")),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s(t("text-zinc-400 text-sm font-medium")),children:"Credit Balance"}),e.jsx("p",{className:s(t("text-2xl font-bold text-white mt-1")),children:r?.creditBalance.toLocaleString()||0})]}),e.jsx("div",{className:s(t("w-12 h-12 bg-cyan-500/10 rounded-lg flex items-center justify-center","group-hover:bg-cyan-500/20 transition-colors")),children:e.jsx(B,{className:s(t("w-6 h-6 text-cyan-400"))})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center text-sm",children:a?e.jsx("span",{className:s(t("text-zinc-400")),children:"Sign up to earn credits"}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:s(t("w-4 h-4 text-green-400 mr-1"))}),e.jsx("span",{className:s(t("text-green-400")),children:"Active account"})]})})})]}),e.jsxs("div",{className:s(t("bg-zinc-800 rounded-lg p-6 border border-zinc-700","hover:border-cyan-500/50 transition-colors group")),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s(t("text-zinc-400 text-sm font-medium")),children:"Membership"}),e.jsx("p",{className:s(t("text-2xl font-bold text-white mt-1")),children:r?.membershipTier})]}),e.jsx("div",{className:s(t("w-12 h-12 bg-cyan-500/10 rounded-lg flex items-center justify-center","group-hover:bg-cyan-500/20 transition-colors")),children:e.jsx(U,{className:s(t("w-6 h-6 text-cyan-400"))})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:s(t("inline-flex items-center px-2 py-1 rounded-full text-xs border",w(r?.membershipTier||"Guest"))),children:e.jsxs("span",{className:s(t(N(r?.membershipTier||"Guest"))),children:[r?.membershipTier||"Guest"," Tier"]})})})]}),e.jsxs("div",{className:s(t("bg-zinc-800 rounded-lg p-6 border border-zinc-700","hover:border-cyan-500/50 transition-colors group")),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s(t("text-zinc-400 text-sm font-medium")),children:"Member Since"}),e.jsx("p",{className:s(t("text-2xl font-bold text-white mt-1")),children:r?.accountAge})]}),e.jsx("div",{className:s(t("w-12 h-12 bg-cyan-500/10 rounded-lg flex items-center justify-center","group-hover:bg-cyan-500/20 transition-colors")),children:e.jsx(A,{className:s(t("w-6 h-6 text-cyan-400"))})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center text-sm",children:a?e.jsx("span",{className:s(t("text-zinc-400")),children:"Join our community"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:s(t("w-4 h-4 text-blue-400 mr-1"))}),e.jsx("span",{className:s(t("text-blue-400")),children:"Trusted member"})]})})})]}),e.jsxs("div",{className:s(t("bg-zinc-800 rounded-lg p-6 border border-zinc-700","hover:border-cyan-500/50 transition-colors group")),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:s(t("text-zinc-400 text-sm font-medium")),children:"Activity Level"}),e.jsx("p",{className:s(t("text-2xl font-bold text-white mt-1")),children:r?.activityLevel})]}),e.jsx("div",{className:s(t("w-12 h-12 bg-cyan-500/10 rounded-lg flex items-center justify-center","group-hover:bg-cyan-500/20 transition-colors")),children:e.jsx(E,{className:s(t("w-6 h-6 text-cyan-400"))})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:s(t("w-full bg-zinc-700 rounded-full h-2")),children:e.jsx("div",{className:s(t("h-2 rounded-full transition-all duration-1000",r?.activityLevel==="High"?"bg-green-400":r?.activityLevel==="Medium"?"bg-yellow-400":"bg-red-400")),style:{width:r?.activityLevel==="High"?"90%":r?.activityLevel==="Medium"?"60%":"30%"}})})})]})]}))};export{X as default};
