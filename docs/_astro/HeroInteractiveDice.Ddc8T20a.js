import{r as i,j as e}from"./react.DlTOZz3w.js";import{C as f,O as g,u as w}from"./@react-three.Ck9Sp3Iy.js";import{k as j,l as p,m as y,E as o,n as d}from"./three.Ga6J2dPR.js";import{u as v}from"./@nanostores.CGdf_Ivg.js";import{a as M}from"./nanostores.Bo9-_MAV.js";import"./react-use-measure.BL_PlT8A.js";import"./its-fine.zliSf007.js";import"./react-reconciler.19LmHG8m.js";import"./react-dom.DmziSIKl.js";import"./scheduler.C323NY8X.js";import"./@babel.CF3RwP-h.js";import"./three-stdlib.C120A-Vd.js";import"./zustand.BejR9DWA.js";const l=M({values:[1,1,1,1],rolling:!1});function b(t=4){l.set({values:Array(t).fill(1),rolling:!1})}function u(t){l.set({...l.get(),rolling:t})}function I(t){l.set({values:t,rolling:!1})}const N=["/assets/items/set/dice/dice1.png","/assets/items/set/dice/dice2.png","/assets/items/set/dice/dice3.png","/assets/items/set/dice/dice4.png","/assets/items/set/dice/dice5.png","/assets/items/set/dice/dice6.png"],P=[new o(-Math.PI/2,-Math.PI/2,-Math.PI/2),new o(0,Math.PI/2,0),new o(0,-Math.PI/2,-Math.PI/2),new o(Math.PI/2,Math.PI,Math.PI),new o(0,0,-Math.PI/2),new o(Math.PI,0,0)];function R({values:t,rolling:m}){const a=i.useRef([]),c=i.useRef([]),h=i.useRef([]);return i.useEffect(()=>{const r=new j;new p(16766720);const n=new p(65535);c.current=N.map(s=>r.load(s)),h.current=c.current.map(s=>new y({map:s,color:n})),a.current.forEach(s=>{s&&(s.material=h.current)})},[]),w(()=>{a.current.forEach((r,n)=>{if(r)if(m)r.rotation.x+=.2,r.rotation.y+=.25;else{const s=P[t[n]-1];r.rotation.x=d.lerp(r.rotation.x,s.x,.15),r.rotation.y=d.lerp(r.rotation.y,s.y,.15),r.rotation.z=d.lerp(r.rotation.z,s.z,.15)}})}),e.jsx(e.Fragment,{children:t.map((r,n)=>e.jsxs("mesh",{ref:s=>a.current[n]=s,position:[n*2-(t.length-1),0,0],children:[e.jsx("boxGeometry",{args:[1,1,1]}),h.current.map((s,x)=>e.jsx("meshStandardMaterial",{attach:`material-${x}`,map:s.map,color:s.color},x))]},n))})}function V(){const t=v(l);i.useEffect(()=>{b();const a=document.getElementById("hero-spinner");a&&a.remove()},[]);const m=()=>{u(!0),setTimeout(()=>{const a=Array.from({length:4},()=>Math.floor(Math.random()*6)+1);I(a),u(!1)},1500)};return e.jsxs("div",{className:"transition-opacity duration-700 ease-out w-full h-auto opacity-100",children:[e.jsx("div",{className:"rounded-xl overflow-hidden shadow-xl w-full h-[300px] sm:h-[400px] md:h-[500px]",children:e.jsxs(f,{shadows:!0,camera:{position:[0,0,8],fov:65},style:{width:"100%",height:"100%"},children:[e.jsx("ambientLight",{intensity:2.5}),e.jsx("pointLight",{position:[10,10,10]}),e.jsx(R,{values:t.values,rolling:t.rolling}),e.jsx(g,{enableZoom:!1})]})}),e.jsxs("div",{className:"mt-6 flex flex-row space-x-3 items-center",children:[e.jsx("div",{className:"mt-4 text-zinc-200 text-lg text-center min-h-[3rem]",children:e.jsx("button",{onClick:m,className:"bg-cyan-600 hover:bg-cyan-700 text-white font-semibold px-6 py-3 rounded-lg shadow-lg focus:outline-none focus:ring-2 focus:ring-cyan-400 disabled:opacity-50","aria-label":"Roll the dice",disabled:t.rolling,children:"Roll the Dice ðŸŽ²"})}),e.jsx("div",{className:"mt-4 text-zinc-200 text-lg text-center min-h-[3rem]",children:t.rolling?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),e.jsx("span",{className:"text-white",children:"Rolling dice..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Total roll:"," ",e.jsx("span",{className:"font-bold text-white",children:t.values.reduce((a,c)=>a+c,0)})]}),e.jsxs("p",{children:["You rolled:"," ",e.jsx("span",{className:"font-bold text-white",children:t.values.join(", ")})]})]})})]})]})}export{V as default};
