import{a as w}from"./react.DlFtjPNG.js";var P,A={},L={},S={};function ie(){if(P)return S;P=1,Object.defineProperty(S,"__esModule",{value:!0}),S.useUnityCanvasId=void 0;var e=w(),n=0,t="react-unity-webgl-canvas";return S.useUnityCanvasId=function(r){return void 0!==r.id?r.id:(0,e.useMemo)((function(){return[t,++n].join("-")}),[])},S}var F,g={},M={};function J(){return F||(F=1,Object.defineProperty(M,"__esModule",{value:!0}),M.UnityLoaderStatus=void 0,(n=e||(M.UnityLoaderStatus=e={})).Idle="Idle",n.Loading="Loading",n.Loaded="Loaded",n.Error="Error"),M;var e,n}var B,$,p={};function R(){return B||(B=1,Object.defineProperty(p,"__esModule",{value:!0}),p.isBrowserEnvironment=void 0,p.isBrowserEnvironment=typeof window<"u"&&typeof document<"u"),p}function se(){if($)return g;$=1;var e=g&&g.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(a,u)}s((r=r.apply(e,n||[])).next())}))},n=g&&g.__generator||function(e,n){var t,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(g,"__esModule",{value:!0}),g.useUnityInstance=void 0;var t=w(),r=J(),o=R();return g.useUnityInstance=function(i,a,u,s){(0,t.useEffect)((function(){e(void 0,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:if(!1===o.isBrowserEnvironment)return[2];if(i!==r.UnityLoaderStatus.Loaded||null===a)return s.setUnityInstance(null),s.setInitialisationError(null),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,window.createUnityInstance(a,u,s.setLoadingProgression)];case 2:return e=n.sent(),s.setUnityInstance(e),s.setInitialisationError(null),[3,4];case 3:return t=n.sent(),s.setUnityInstance(null),s.setInitialisationError(t),[3,4];case 4:return[2]}}))}))}),[i,a,u,s])},g}var T,q={};function ue(){if(T)return q;T=1,Object.defineProperty(q,"__esModule",{value:!0}),q.useUnityArguments=void 0;var e=w();return q.useUnityArguments=function(n){return(0,e.useMemo)((function(){return{dataUrl:n.unityProvider.unityConfig.dataUrl,frameworkUrl:n.unityProvider.unityConfig.frameworkUrl,codeUrl:n.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:n.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:n.unityProvider.unityConfig.memoryUrl,symbolsUrl:n.unityProvider.unityConfig.symbolsUrl,workerUrl:n.unityProvider.unityConfig.workerUrl,companyName:n.unityProvider.unityConfig.companyName,productName:n.unityProvider.unityConfig.productName,productVersion:n.unityProvider.unityConfig.productVersion,webglContextAttributes:n.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:n.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:n.devicePixelRatio||1,autoSyncPersistentDataPath:n.autoSyncPersistentDataPath,matchWebGLToCanvasSize:"boolean"!=typeof n.matchWebGLToCanvasSize||n.matchWebGLToCanvasSize,disabledCanvasEvents:n.disabledCanvasEvents||["contextmenu","dragstart"],print:function(e){},printErr:function(e){}}}),[])},q}var G,D,k={};function oe(){if(G)return k;G=1,Object.defineProperty(k,"__esModule",{value:!0}),k.useUnityLoader=void 0;var e=w(),n=R(),t=J();return k.useUnityLoader=function(r){var o=(0,e.useState)(t.UnityLoaderStatus.Loading),i=o[0],a=o[1];return(0,e.useEffect)((function(){if(!1!==n.isBrowserEnvironment){if(null===r.loaderUrl)return void a(t.UnityLoaderStatus.Idle);var e=window.document.querySelector('script[src="'.concat(r.loaderUrl,'"]'));null===e?((e=window.document.createElement("script")).type="text/javascript",e.src=r.loaderUrl,e.async=!0,e.setAttribute("data-status","loading"),window.document.body.appendChild(e),e.addEventListener("load",(function(){return e?.setAttribute("data-status","loaded")})),e.addEventListener("error",(function(){return e?.setAttribute("data-status","error")}))):a("loaded"===e.getAttribute("data-status")?t.UnityLoaderStatus.Loaded:t.UnityLoaderStatus.Error);var o=function(e){return a("load"===e.type?t.UnityLoaderStatus.Loaded:t.UnityLoaderStatus.Error)};return e.addEventListener("load",o),e.addEventListener("error",o),function(){null!==e&&(e.removeEventListener("load",o),e.removeEventListener("error",o),window.document.body.removeChild(e))}}}),[r.loaderUrl]),i},k}function ce(){if(D)return L;D=1,Object.defineProperty(L,"__esModule",{value:!0}),L.Unity=void 0;var e=w(),n=w(),t=ie(),r=se(),o=ue(),i=oe(),a=(0,n.forwardRef)((function(a,u){var s=(0,n.useRef)(null),c=(0,t.useUnityCanvasId)(a),l=(0,o.useUnityArguments)(a),d=(0,i.useUnityLoader)(a.unityProvider.unityConfig);return(0,r.useUnityInstance)(d,s.current,l,a.unityProvider),(0,e.useImperativeHandle)(u,(function(){return s.current})),(0,e.createElement)("canvas",{ref:s,id:c,style:a.style,className:a.className,tabIndex:a.tabIndex})}));return L.Unity=a,L}var z,h={},N={};function K(){if(z)return N;z=1,Object.defineProperty(N,"__esModule",{value:!0}),N.errorMessages=void 0;return N.errorMessages={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"},N}var V,E={};function le(){if(V)return E;V=1;var e=E&&E.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)(r||!(o in n))&&(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(E,"__esModule",{value:!0}),E.useEventSystem=void 0;var n=w(),t=K(),r=R(),o=[];!0===r.isBrowserEnvironment&&(window.dispatchReactUnityEvent=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=void 0;return o.forEach((function(r){i=r.apply(void 0,e([n],t,!1))})),i});return E.useEventSystem=function(){var r=(0,n.useRef)([]),i=(0,n.useCallback)((function(n,t){r.current=e(e([],r.current,!0),[{eventName:n,callback:t}],!1)}),[r]),a=(0,n.useCallback)((function(e,n){r.current=r.current.filter((function(t){return t.eventName!==e&&t.callback!==n}))}),[r]),u=(0,n.useCallback)((function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=r.current.find((function(n){return n.eventName===e}));if(!(typeof i>"u"))return i.callback.apply(i,n);console.warn(t.errorMessages.noEventListener,{eventName:e})}),[r]);return(0,n.useEffect)((function(){return o.push(u),function(){o.splice(o.indexOf(u),1)}}),[u]),{addEventListener:i,removeEventListener:a}},E}var W,Q,H,x={};function de(){if(W)return x;W=1,Object.defineProperty(x,"__esModule",{value:!0}),x.useNullableState=void 0;var e=w();return x.useNullableState=function(n){return(0,e.useState)(n||null)},x}function ve(){if(Q)return h;Q=1;var e=h&&h.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(a,u)}s((r=r.apply(e,n||[])).next())}))},n=h&&h.__generator||function(e,n){var t,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.useUnityContext=void 0;var t=w(),r=K(),o=le(),i=de();return h.useUnityContext=function(a){var u=(0,i.useNullableState)(),s=u[0],c=u[1],l=(0,t.useState)(0),d=l[0],f=l[1],y=(0,t.useState)(!1),v=y[0],p=y[1],b=(0,i.useNullableState)(),U=b[0],g=b[1],h=(0,o.useEventSystem)(),w=(0,t.useRef)({setLoadingProgression:f,setInitialisationError:g,setUnityInstance:c,setIsLoaded:p,unityConfig:a}),m=(0,t.useCallback)((function(e){null!==s?s.SetFullscreen(!0===e?1:0):console.warn(r.errorMessages.requestFullscreenNoUnityInstance)}),[s]),E=(0,t.useCallback)((function(){if(!(null===s||typeof s.Module.canvas>"u"))return s.Module.canvas.requestPointerLock();console.warn(r.errorMessages.requestPointerLockNoUnityInstanceOrCanvas)}),[s]),L=(0,t.useCallback)((function(e,n,t){null!==s?s.SendMessage(e,n,t):console.warn(r.errorMessages.sendMessageNoUnityInstance)}),[s]),P=(0,t.useCallback)((function(e,n){if(!(null===s||typeof s.Module.canvas>"u"))return s.Module.canvas.toDataURL(e,n);console.warn(r.errorMessages.screenshotNoUnityInstanceOrCanvas)}),[s]),C=(0,t.useCallback)((function(){return null===s?(console.warn(r.errorMessages.quitNoUnityInstance),Promise.reject()):s.Quit()}),[s]),I=(0,t.useCallback)((function(){return e(void 0,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return null===s||typeof s.Module.canvas>"u"?(console.warn(r.errorMessages.genericNoUnityInstance),[2,Promise.reject()]):(e=s.Module.canvas,document.body.appendChild(e),e.style.display="none",[4,C()]);case 1:return n.sent(),e.remove(),[2]}}))}))}),[s]);return(0,t.useEffect)((function(){p(1===d)}),[d]),{unityProvider:w.current,loadingProgression:d,initialisationError:U,isLoaded:v,UNSAFE__unityInstance:s,requestFullscreen:m,requestPointerLock:E,sendMessage:L,takeScreenshot:P,unload:C,UNSAFE__detachAndUnloadImmediate:I,addEventListener:h.addEventListener,removeEventListener:h.removeEventListener}},h}function fe(){return H||(H=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useUnityContext=e.Unity=void 0;var n=ce();Object.defineProperty(e,"Unity",{enumerable:!0,get:function(){return n.Unity}});var t=ve();Object.defineProperty(e,"useUnityContext",{enumerable:!0,get:function(){return t.useUnityContext}})}(A)),A}var Ue=fe();export{Ue as e};