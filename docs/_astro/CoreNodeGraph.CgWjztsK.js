import{r as n,j as m}from"./react.C2V1wh_4.js";import{F as y}from"./react-force-graph.Dzc8p-7P.js";import{_ as x}from"./three-spritetext.6Rdx9b_b.js";import{c as E,S as g,l as v}from"./three.BMLrZlci.js";import"./@react-three.BOv1JqT7.js";import"./react-kapsule.B33Wx_QN.js";import"./jerrypick.JYybmJvo.js";import"./fromentries.CMzV6BDH.js";import"./3d-force-graph-vr.CT4ZcLBw.js";import"./aframe.mqRAr1z8.js";import"./aframe-extras.B0fXxeC9.js";import"./nipplejs.BxsX8Mt3.js";import"./three-pathfinding.DqyuF3vG.js";import"./aframe-forcegraph-component.t_grmiDR.js";import"./accessor-fn.DXlyMOTY.js";import"./three-forcegraph.DPtqh7pT.js";import"./ngraph.graph.DHLiS_Or.js";import"./ngraph.events.CKJmVecw.js";import"./ngraph.forcelayout.hmfGpXZR.js";import"./ngraph.merge.B9WtB87t.js";import"./ngraph.random.CzRKCPxx.js";import"./kapsule.DoQQNCoE.js";import"./lodash-es.BFDc8I3u.js";import"./data-joint.CzFSS5b-.js";import"./index-array-by.D2QHmuxS.js";import"./tinycolor2.Begke6kS.js";import"./d3-scale.Btia-9_0.js";import"./internmap.BkD7Hj8s.js";import"./d3-scale-chromatic.BvAsqZ2o.js";import"./d3-force-3d.B-Z8vgRJ.js";import"./d3-timer.DdKHrDhs.js";import"./d3-dispatch.kxCwF96_.js";import"./d3-binarytree.e94m1gdS.js";import"./d3-quadtree.CSANTnla.js";import"./d3-octree.CZ7m1I_d.js";import"./d3-array.tv6RD-6E.js";import"./polished.gGQlsDnk.js";import"./@babel.D__KhwOR.js";import"./prop-types.Cf6v4uUl.js";import"./3d-force-graph-ar.DRB6wBGE.js";import"./3d-force-graph.DFDvUGD1.js";import"./three-render-objects.W7a_6yn9.js";import"./@tweenjs.Ddm5d4jd.js";import"./force-graph.6YaWUa_S.js";import"./d3-zoom.B5IvJ505.js";import"./d3-transition.BipLP9ld.js";import"./d3-interpolate.SIV6RuuQ.js";import"./d3-color.9lF95FHy.js";import"./d3-selection.DSeOx27A.js";import"./d3-ease.DRPgKoYJ.js";import"./d3-drag.DP3CZ3aB.js";import"./canvas-color-tracker.BPG-3Xnv.js";import"./bezier-js.4W2y2lww.js";function vt(){const[h,d]=n.useState({nodes:[],links:[]}),s=n.useRef(null),i=n.useRef(null),[l,u]=n.useState({width:window.innerWidth,height:window.innerHeight});n.useEffect(()=>{fetch("/api/graph.json").then(t=>t.json()).then(t=>{const e=w(t.nodes),r=t.links;d({nodes:e,links:r})}).catch(t=>console.error("Error fetching graph data:",t))},[]);const f=t=>{t.id?window.open(`/${t.id}`,"_blank"):console.log("No URL provided for this node")};n.useEffect(()=>{const t=()=>{s.current&&u({width:s.current.offsetWidth,height:s.current.offsetHeight})};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t)}},[s.current]);function w(t){let e={};return t.forEach(r=>{r.tags.forEach(o=>{e[o]||(e[o]={x:0,y:0,z:0,count:0}),e[o].x+=Math.random()*100,e[o].y+=Math.random()*100,e[o].z+=Math.random()*100,e[o].count++})}),Object.keys(e).forEach(r=>{e[r].x/=e[r].count,e[r].y/=e[r].count,e[r].z/=e[r].count}),t.forEach(r=>{let o=0,c=0,a=0;r.tags.forEach(p=>{o+=e[p].x,c+=e[p].y,a+=e[p].z}),r.x=o/r.tags.length,r.y=c/r.tags.length,r.z=a/r.tags.length}),t}return m.jsxs("div",{ref:s,className:"w-full h-100vh overflow-hidden overscroll-contain relative",id:"nodegraph",children:[m.jsx(y,{graphData:h,width:l.width,height:l.height,nodeAutoColorBy:"group",linkColor:t=>t.type==="url"?"blue":"red",linkWidth:t=>t.type==="url"?2:1,linkDirectionalParticles:t=>t.type==="url"?2:0,nodeThreeObject:t=>{const e=new E(new g(5),new v({color:t.color})),r=new x(t.name);return r.color="white",r.textHeight=8,r.material.depthWrite=!1,r.material.transparent=!0,r.position.set(0,0,12),e.add(r),e},onNodeClick:f,onNodeHover:t=>{t?(i.current.style.display="block",i.current.style.left=`${t.x}px`,i.current.style.top=`${t.y}px`,i.current.innerHTML=t.description):i.current.style.display="none"}}),m.jsx("div",{ref:i,className:"absolute bg-white p-2 rounded shadow-md hidden",style:{transform:"translate(-50%, -50%)",pointerEvents:"none"},children:"Tooltip"})]})}export{vt as default};
