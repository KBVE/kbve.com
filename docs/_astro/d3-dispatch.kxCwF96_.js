var a={value:()=>{}};function l(){for(var n,r=0,t=arguments.length,e={};r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new f(e)}function f(n){this._=n}function h(n,r){return n.trim().split(/^|\s+/).map((function(n){var t="",e=n.indexOf(".");if(e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:t}}))}function w(n,r){for(var t,e=0,o=n.length;e<o;++e)if((t=n[e]).name===r)return t.value}function s(n,r,t){for(var e=0,o=n.length;e<o;++e)if(n[e].name===r){n[e]=a,n=n.slice(0,e).concat(n.slice(e+1));break}return null!=t&&n.push({name:r,value:t}),n}f.prototype=l.prototype={constructor:f,on:function(n,r){var t,e=this._,o=h(n+"",e),i=-1,l=o.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++i<l;)if(t=(n=o[i]).type)e[t]=s(e[t],n.name,r);else if(null==r)for(t in e)e[t]=s(e[t],n.name,null);return this}for(;++i<l;)if((t=(n=o[i]).type)&&(t=w(e[t],n.name)))return t},copy:function(){var n={},r=this._;for(var t in r)n[t]=r[t].slice();return new f(n)},call:function(n,r){if((t=arguments.length-2)>0)for(var t,e,o=new Array(t),i=0;i<t;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,t=(e=this._[n]).length;i<t;++i)e[i].value.apply(r,o)},apply:function(n,r,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var e=this._[n],o=0,i=e.length;o<i;++o)e[o].value.apply(r,t)}};export{l as d};