import{r as h,j as e}from"./react.CvslfkeK.js";import{z as t}from"./zod.D6aOmuMC.js";import{supabase as P}from"./supabaseClient.xweZyGB4.js";import{u as H}from"./react-hook-form.D5LhBzNo.js";import{t as q}from"./tailwind-merge.B9ugUrge.js";import{c as u}from"./clsx.B-dksMZM.js";import{t as Q}from"./@hookform.DFFlZybA.js";import{L as ae,b as se,K as le,H as de,P as M,B as I,c as K,T as z,d as $,e as ne,f as B,U as G,g as oe,h as ie,G as U,C as ce,i as xe,j as ge,W as me}from"./lucide-react.Cq0BVVq0.js";import"./@react-three.B-wTPXHf.js";import"./@supabase.B1FuS6Fv.js";import"./Page.astro_astro_type_script_index_0_lang.DoJZq5Ub.js";import"./react-dom.DDrfKqI3.js";import"./svelte.BEh2_tzM.js";import"./esm-env.rsSWfq8L.js";t.object({user_id:t.string().uuid(),key:t.string().regex(/^[a-z0-9_]{3,64}$/),vault_key:t.string(),created_at:t.string().datetime(),updated_at:t.string().datetime()});const ue=t.object({id:t.string().uuid(),user_id:t.string().uuid(),account_name:t.string().regex(/^[a-z0-9_]{3,64}$/),vault_email_key:t.string(),vault_password_key:t.string(),state:t.enum(["offline","active","banned","error"]),world:t.number().int().nullable(),p2p:t.boolean(),created_at:t.string().datetime(),updated_at:t.string().datetime()});ue.pick({account_name:!0,state:!0,world:!0,p2p:!0,created_at:!0,updated_at:!0});const he=t.object({username:t.string().min(3).max(32).optional(),combat_level:t.number().int().min(3).max(126),total_level:t.number().int().min(0).max(2277),quest_points:t.number().int().min(0).max(300),wealth_gp:t.number().int().min(0).optional(),notes:t.string().max(500).optional(),last_synced_at:t.string().datetime(),updated_at:t.string().datetime()}),be=t.object({account_name:t.string().regex(/^[a-z0-9_]{3,64}$/,"Account name must be 3-64 characters, lowercase letters, numbers, and underscores only"),email:t.string().email("Please enter a valid email address"),password:t.string().min(8,"Password must be at least 8 characters").max(128,"Password must be less than 128 characters"),world:t.number().int().min(1).max(999).nullable().optional(),p2p:t.boolean().optional().default(!1)}),pe=t.object({account_name:t.string().regex(/^[a-z0-9_]{3,64}$/),username:t.string().min(3).max(32).optional(),combat_level:t.number().int().min(3).max(126).optional(),total_level:t.number().int().min(0).max(2277).optional(),quest_points:t.number().int().min(0).max(300).optional(),wealth_gp:t.number().int().min(0).optional(),notes:t.string().max(500).optional()});t.object({key:t.string().regex(/^[a-z0-9_]{3,64}$/,"Key must be 3-64 characters, lowercase letters, numbers, and underscores only"),value:t.string().min(1,"Value cannot be empty").max(1e3,"Value too long")});t.object({message:t.string(),details:t.string().optional(),hint:t.string().optional(),code:t.string().optional()});const T={offline:{label:"Offline",color:"gray",icon:"⚫"},active:{label:"Active",color:"green",icon:"🟢"},banned:{label:"Banned",color:"red",icon:"🔴"},error:{label:"Error",color:"yellow",icon:"🟡"}},ye=(m,n)=>`${n}_email`,fe=m=>`${m}_password`,W=m=>/^[a-z0-9_]{3,64}$/.test(m),Y=(m,n)=>{const c=ye(n,m),a=fe(m);return{emailKey:c,passwordKey:a,isValid:W(c)&&W(a)}};he.partial().omit({last_synced_at:!0,updated_at:!0});const s={account_name:{label:"Account Name",placeholder:"Enter account name (a-z, 0-9, _)",maxLength:64},email:{label:"Email",placeholder:"Enter email address"},password:{label:"Password",placeholder:"Enter password",minLength:8,maxLength:128},username:{label:"Display Name",placeholder:"Enter display name (optional)",maxLength:32},world:{label:"World",placeholder:"Enter world number (optional)",min:1,max:999},combat_level:{label:"Combat Level",placeholder:"Enter combat level",min:3,max:126},total_level:{label:"Total Level",placeholder:"Enter total level",min:0,max:2277},quest_points:{label:"Quest Points",placeholder:"Enter quest points",min:0,max:300},wealth_gp:{label:"Wealth (GP)",placeholder:"Enter total wealth in GP",min:0},notes:{label:"Notes",placeholder:"Enter notes (optional)",maxLength:500,rows:3}},je=async({account_name:m,email:n,password:c,world:a,p2p:k})=>{const{emailKey:b,passwordKey:v,isValid:A}=Y(m,n);if(!A)throw new Error("Failed to generate valid secret keys. Please try a shorter account name or email.");try{const{error:y}=await P.rpc("set_user_secret",{p_key:b,p_value:n});if(y)throw new Error(`Failed to store email secret: ${y.message}`);const{error:p}=await P.rpc("set_user_secret",{p_key:v,p_value:c});if(p)throw new Error(`Failed to store password secret: ${p.message}`);const{data:N,error:o}=await P.rpc("create_osrs_account",{p_account_name:m,p_email:b,p_password:v,p_world:a||null,p_p2p:k||!1});if(o)throw new Error(o.message||"Failed to create OSRS account");return N}catch(y){throw y}};function ve({onSuccess:m,onCancel:n,className:c}){const[a,k]=h.useState(!1),[b,v]=h.useState(null),[A,y]=h.useState(null),{register:p,handleSubmit:N,formState:{errors:o,isValid:x,dirtyFields:C},reset:f,watch:E}=H({resolver:Q(be),mode:"onChange",defaultValues:{account_name:"",email:"",password:"",world:void 0,p2p:!1}}),i=E("account_name"),D=E("email"),L=E("p2p"),j=i&&D?Y(i,D):null,_=async S=>{k(!0),v(null),y(null);try{await je(S),y(`Account "${S.account_name}" created successfully!`),f(),m?.(S.account_name)}catch(O){const V=O instanceof Error?O.message:"An unexpected error occurred";v(V)}finally{k(!1)}},F=()=>{f(),v(null),y(null),n?.()};return e.jsx("div",{className:q("w-full max-w-lg mx-auto",c),children:e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-2xl rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎮"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Create OSRS Account"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add a new Old School RuneScape account to your dashboard"})]}),e.jsxs("form",{onSubmit:N(_),className:"space-y-6",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"account_name",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:["🏷️ ",s.account_name.label," (Database Reference)"]}),e.jsx("input",{...p("account_name"),type:"text",id:"account_name",placeholder:s.account_name.placeholder,maxLength:s.account_name.maxLength,className:u("w-full px-4 py-3 border-2 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400","group-hover:border-indigo-300 dark:group-hover:border-indigo-600",o.account_name?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 bg-white dark:bg-gray-700")}),o.account_name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:["⚠️ ",o.account_name.message]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"💡 This is NOT your OSRS username - it's a reference ID for organizing your accounts."}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:'Examples: "main_account", "skiller_1", "fisher_5", "ironman_alt"'})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:["📧 Legacy ",s.email.label," / Username"]}),e.jsx("input",{...p("email"),type:"email",id:"email",placeholder:s.email.placeholder,className:u("w-full px-4 py-3 border-2 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400","group-hover:border-indigo-300 dark:group-hover:border-indigo-600",o.email?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 bg-white dark:bg-gray-700")}),o.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:["⚠️ ",o.email.message]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),s.password.label]}),e.jsx("input",{...p("password"),type:"password",id:"password",placeholder:s.password.placeholder,minLength:s.password.minLength,maxLength:s.password.maxLength,className:u("w-full px-4 py-3 border-2 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400","group-hover:border-indigo-300 dark:group-hover:border-indigo-600",o.password?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 bg-white dark:bg-gray-700")}),o.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:["⚠️ ",o.password.message]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...p("p2p"),type:"checkbox",id:"p2p",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded dark:border-gray-600 dark:bg-gray-700"}),e.jsx("label",{htmlFor:"p2p",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Premium (P2P) Account"})]}),L&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"world",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.world.label}),e.jsx("input",{...p("world",{setValueAs:S=>S===""?void 0:Number(S)}),type:"number",id:"world",placeholder:s.world.placeholder,min:s.world.min,max:s.world.max,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",o.world?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),o.world&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.world.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"P2P worlds: 300-599 | F2P worlds: 1-99"})]}),j&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Secret Keys Preview"]}),e.jsxs("div",{className:"space-y-1 text-xs text-blue-800 dark:text-blue-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email Key:"}),e.jsx("code",{className:"ml-1 bg-blue-100 dark:bg-blue-800 px-1 rounded",children:j.emailKey})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Password Key:"}),e.jsx("code",{className:"ml-1 bg-blue-100 dark:bg-blue-800 px-1 rounded",children:j.passwordKey})]}),!j.isValid&&e.jsxs("div",{className:"text-red-600 dark:text-red-400 font-medium mt-2 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Keys are too long. Please use a shorter account name or email."]})]}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"These keys will be automatically generated to securely store your credentials."})]}),A&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-300 rounded-md",children:e.jsx("p",{className:"text-sm text-green-700",children:A})}),b&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-300 rounded-md",children:e.jsx("p",{className:"text-sm text-red-700",children:b})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:!x||a||(j?!j.isValid:!1),className:u("flex-1 py-2 px-4 rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2","transition-colors duration-200",x&&!a&&(!j||j.isValid)?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"),children:a?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):j&&!j.isValid?"Invalid Key Length":"Create Account"}),n&&e.jsx("button",{type:"button",onClick:F,disabled:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Cancel"})]})]})]})})}function we({accountName:m,onSuccess:n,onCancel:c,className:a}){const[k,b]=h.useState(!1),[v,A]=h.useState(!0),[y,p]=h.useState(null),[N,o]=h.useState(null),[x,C]=h.useState(null),{register:f,handleSubmit:E,formState:{errors:i,isValid:D,isDirty:L},reset:j,setValue:_}=H({resolver:Q(pe),mode:"onChange",defaultValues:{account_name:m,username:"",combat_level:void 0,total_level:void 0,quest_points:void 0,notes:""}}),F=async()=>{try{A(!0);const{data:l,error:w}=await P.rpc("get_osrs_account_info",{p_account_name:m});if(w)throw new Error(w.message);const g=l?.[0]||null;C(g),g&&(_("username",g.username||""),_("combat_level",g.combat_level!==null&&g.combat_level!==void 0?g.combat_level:void 0),_("total_level",g.total_level!==null&&g.total_level!==void 0?g.total_level:void 0),_("quest_points",g.quest_points!==null&&g.quest_points!==void 0?g.quest_points:void 0),_("wealth_gp",g.wealth_gp!==null&&g.wealth_gp!==void 0?g.wealth_gp:void 0),_("notes",g.notes||""))}catch(l){const w=l instanceof Error?l.message:"Failed to load account info";p(w),console.error("Error fetching account info:",l)}finally{A(!1)}};h.useEffect(()=>{F()},[m]);const S=async l=>{b(!0),p(null),o(null);try{const{error:w}=await P.rpc("update_osrs_account_info",{p_account_name:l.account_name,p_username:l.username||null,p_notes:l.notes||null,p_combat_level:l.combat_level!==void 0?l.combat_level:null,p_total_level:l.total_level!==void 0?l.total_level:null,p_quest_points:l.quest_points!==void 0?l.quest_points:null,p_wealth_gp:l.wealth_gp!==void 0?l.wealth_gp:null});if(w)throw new Error(w.message||"Failed to update account info");o("Account information updated successfully!"),await F(),n?.()}catch(w){const g=w instanceof Error?w.message:"An unexpected error occurred";p(g)}finally{b(!1)}},O=()=>{j(),p(null),o(null),c?.()},V=()=>x?e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Current Stats"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x.combat_level!==null&&x.combat_level!==void 0?x.combat_level:"N/A"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Combat Level"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.total_level!==null&&x.total_level!==void 0?x.total_level:"N/A"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Level"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x.quest_points!==null&&x.quest_points!==void 0?x.quest_points:"N/A"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quest Points"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:x.wealth_gp!==null&&x.wealth_gp!==void 0?x.wealth_gp.toLocaleString():"N/A"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wealth (GP)"})]})]}),x.last_synced_at&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:["Last synced: ",new Date(x.last_synced_at).toLocaleString()]})]}):null;return v?e.jsx("div",{className:q("w-full max-w-2xl mx-auto",a),children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading account details..."})]})})}):e.jsx("div",{className:q("w-full max-w-2xl mx-auto",a),children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Account Details: ",m]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View and update your OSRS account information"})]}),V(),e.jsxs("form",{onSubmit:E(S),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.username.label}),e.jsx("input",{...f("username"),type:"text",id:"username",placeholder:s.username.placeholder,maxLength:s.username.maxLength,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.username?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.username.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Optional display name for your account"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"combat_level",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.combat_level.label}),e.jsx("input",{...f("combat_level",{setValueAs:l=>l===""?void 0:Number(l)}),type:"number",id:"combat_level",placeholder:s.combat_level.placeholder,min:s.combat_level.min,max:s.combat_level.max,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.combat_level?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.combat_level&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.combat_level.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"total_level",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.total_level.label}),e.jsx("input",{...f("total_level",{setValueAs:l=>l===""?void 0:Number(l)}),type:"number",id:"total_level",placeholder:s.total_level.placeholder,min:s.total_level.min,max:s.total_level.max,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.total_level?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.total_level&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.total_level.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quest_points",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.quest_points.label}),e.jsx("input",{...f("quest_points",{setValueAs:l=>l===""?void 0:Number(l)}),type:"number",id:"quest_points",placeholder:s.quest_points.placeholder,min:s.quest_points.min,max:s.quest_points.max,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.quest_points?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.quest_points&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.quest_points.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wealth_gp",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.wealth_gp.label}),e.jsx("input",{...f("wealth_gp",{setValueAs:l=>l===""?void 0:Number(l)}),type:"number",id:"wealth_gp",placeholder:s.wealth_gp.placeholder,min:s.wealth_gp.min,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.wealth_gp?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.wealth_gp&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.wealth_gp.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s.notes.label}),e.jsx("textarea",{...f("notes"),id:"notes",rows:s.notes.rows,placeholder:s.notes.placeholder,maxLength:s.notes.maxLength,className:u("w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",i.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),i.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.notes.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Add personal notes about this account (goals, strategies, etc.)"})]}),N&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-300 rounded-md",children:e.jsx("p",{className:"text-sm text-green-700",children:N})}),y&&e.jsx("div",{className:"p-3 bg-red-100 border border-red-300 rounded-md",children:e.jsx("p",{className:"text-sm text-red-700",children:y})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:!L||k,className:u("flex-1 py-2 px-4 rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2","transition-colors duration-200",L&&!k?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"),children:k?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):L?"Update Account Info":"No Changes"}),c&&e.jsx("button",{type:"button",onClick:O,disabled:k,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Cancel"})]})]})]})})}function qe({className:m}){const[n,c]=h.useState("dashboard"),[a,k]=h.useState([]),[b,v]=h.useState(null),[A,y]=h.useState(!0),[p,N]=h.useState(null),[o,x]=h.useState(!1),[C,f]=h.useState(!1),E=[{id:"dashboard",label:"Dashboard",icon:de,badge:a.length>0?a.length.toString():void 0},{id:"create",label:"Add Account",icon:M},{id:"analytics",label:"Analytics",icon:I},{id:"settings",label:"Settings",icon:K}],i=async()=>{try{y(!0);const{data:r,error:d}=await P.rpc("list_osrs_accounts");if(d)throw new Error(d.message);k(r||[])}catch(r){const d=r instanceof Error?r.message:"Failed to load accounts";N(d),console.error("Error fetching accounts:",r)}finally{y(!1)}},D=async r=>{if(confirm(`Are you sure you want to delete the account "${r}"? This action cannot be undone.`))try{const{error:d}=await P.rpc("delete_osrs_account",{p_account_name:r});if(d)throw new Error(d.message);await i(),b===r&&(v(null),c("dashboard"))}catch(d){const R=d instanceof Error?d.message:"Failed to delete account";N(R)}};h.useEffect(()=>{i()},[]);const L=r=>{c("dashboard"),i()},j=r=>{v(r),c("details")},_=r=>{v(r),c("edit")},F=()=>e.jsxs(e.Fragment,{children:[C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>f(!1)}),e.jsxs("div",{className:u("bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 flex flex-col","lg:relative lg:translate-x-0 min-h-0 h-full",C?"fixed inset-y-0 left-0 z-50 w-64":"hidden lg:flex",!C&&o?"lg:w-16":"lg:w-64"),children:[e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[(!o||C)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white",children:e.jsx($,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"OSRS"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Dashboard"})]})]}),e.jsx("button",{onClick:()=>{x(!o),f(!1)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:o?e.jsx(ne,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}):e.jsx(B,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("ul",{className:"space-y-2",children:E.map(r=>{const d=r.icon;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>{c(r.id),f(!1)},className:u("w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200 hover:scale-105",n===r.id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[e.jsx(d,{className:"w-5 h-5 flex-shrink-0"}),(!o||C)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:r.label}),r.badge&&e.jsx("span",{className:u("ml-auto px-2 py-1 text-xs font-bold rounded-full",n===r.id?"bg-white/20 text-white":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"),children:r.badge})]})]})},r.id)})})}),(!o||C)&&e.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:"Player"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Account Manager"})]})]})})]})]}),S=()=>e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 lg:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>f(!0),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:e.jsx(oe,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:O()}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:V()})]})]}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[n==="dashboard"&&e.jsxs("button",{onClick:()=>c("create"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-2 px-3 lg:py-2 lg:px-4 rounded-lg transition-all duration-300 flex items-center gap-2 hover:scale-105 hover:shadow-lg",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"New Account"})]}),(n==="details"||n==="edit"||n==="create")&&e.jsxs("button",{onClick:()=>c("dashboard"),className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 font-medium flex items-center gap-2 transition-all duration-300 hover:scale-105 px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:e.jsx(ie,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})]})}),O=()=>{switch(n){case"dashboard":return"Account Dashboard";case"create":return"Add New Account";case"edit":return`Edit ${b||"Account"}`;case"details":return`${b||"Account"} Details`;case"analytics":return"Analytics & Reports";case"settings":return"Settings";default:return"OSRS Dashboard"}},V=()=>{switch(n){case"dashboard":return`Manage your ${a.length} OSRS accounts`;case"create":return"Create a new account entry";case"edit":return"Modify account information and settings";case"details":return"View comprehensive account information";case"analytics":return"Track your progress and statistics";case"settings":return"Configure your dashboard preferences";default:return"Old School RuneScape account management"}},l=r=>{const d=T[r.state];return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.account_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl transition-transform duration-300 hover:scale-110",children:d.icon}),e.jsx("span",{className:u("px-3 py-1 text-xs font-bold rounded-full transition-all duration-300 hover:scale-105",d.color==="green"&&"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",d.color==="red"&&"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",d.color==="yellow"&&"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",d.color==="gray"&&"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:d.label})]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Type:"}),e.jsx("span",{className:u("font-bold px-2 py-1 rounded-full text-xs",r.p2p?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"),children:r.p2p?"Premium (P2P)":"Free (F2P)"})]}),r.world&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"World:"}),e.jsxs("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:["#",r.world]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{className:"font-medium",children:new Date(r.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(r.account_name),className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white text-sm font-bold py-3 px-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg",children:"View Details"}),e.jsx("button",{onClick:()=>_(r.account_name),className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm font-bold rounded-lg transition-all duration-300 hover:scale-105",children:"✏️"}),e.jsx("button",{onClick:()=>D(r.account_name),className:"px-4 py-3 bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800 text-red-700 dark:text-red-300 text-sm font-bold rounded-lg transition-all duration-300 hover:scale-105",children:"🗑️"})]})]},r.account_name)},w=()=>e.jsxs("div",{className:"space-y-4 lg:space-y-6 p-4 lg:p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-800 dark:to-gray-700 p-4 lg:p-6 rounded-xl shadow-lg border border-blue-200 dark:border-gray-600 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 lg:mb-3",children:[e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-blue-600 dark:text-blue-400",children:a.length}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:e.jsx(U,{className:"w-8 h-8 lg:w-10 lg:h-10"})})]}),e.jsx("div",{className:"text-xs lg:text-sm font-medium text-blue-800 dark:text-blue-300",children:"Total Accounts"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 hidden sm:block",children:a.length>0?"+100% active":"Start your journey"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-800 dark:to-gray-700 p-4 lg:p-6 rounded-xl shadow-lg border border-green-200 dark:border-gray-600 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 lg:mb-3",children:[e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-green-600 dark:text-green-400",children:a.filter(r=>r.state==="active").length}),e.jsx("div",{className:"text-green-600 dark:text-green-400",children:e.jsx(ce,{className:"w-8 h-8 lg:w-10 lg:h-10"})})]}),e.jsx("div",{className:"text-xs lg:text-sm font-medium text-green-800 dark:text-green-300",children:"Active"}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1 hidden sm:block",children:"Ready to play"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 dark:from-gray-800 dark:to-gray-700 p-4 lg:p-6 rounded-xl shadow-lg border border-purple-200 dark:border-gray-600 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 lg:mb-3",children:[e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400",children:a.filter(r=>r.p2p).length}),e.jsx("div",{className:"text-purple-600 dark:text-purple-400",children:e.jsx(xe,{className:"w-8 h-8 lg:w-10 lg:h-10"})})]}),e.jsx("div",{className:"text-xs lg:text-sm font-medium text-purple-800 dark:text-purple-300",children:"Premium"}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1 hidden sm:block",children:"Membership active"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-100 dark:from-gray-800 dark:to-gray-700 p-4 lg:p-6 rounded-xl shadow-lg border border-orange-200 dark:border-gray-600 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 lg:mb-3",children:[e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-orange-600 dark:text-orange-400",children:a.reduce((r,d)=>d.world?r+1:r,0)}),e.jsx("div",{className:"text-orange-600 dark:text-orange-400",children:e.jsx(ge,{className:"w-8 h-8 lg:w-10 lg:h-10"})})]}),e.jsx("div",{className:"text-xs lg:text-sm font-medium text-orange-800 dark:text-orange-300",children:"In Game"}),e.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1 hidden sm:block",children:"Currently online"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>c("create"),className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 rounded-lg border border-blue-200 dark:border-gray-600 hover:shadow-md transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400 mb-2",children:e.jsx(M,{className:"w-8 h-8"})}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Add Account"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create new OSRS account entry"})]}),e.jsxs("button",{onClick:()=>c("analytics"),className:"p-4 bg-gradient-to-br from-purple-50 to-violet-100 dark:from-gray-700 dark:to-gray-600 rounded-lg border border-purple-200 dark:border-gray-600 hover:shadow-md transition-all duration-300 hover:-translate-y-1 text-left",children:[e.jsx("div",{className:"text-purple-600 dark:text-purple-400 mb-2",children:e.jsx(I,{className:"w-8 h-8"})}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"View Analytics"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track your progress"})]}),e.jsxs("button",{onClick:()=>c("settings"),className:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-300 hover:-translate-y-1 text-left sm:col-span-2 lg:col-span-1",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e.jsx(K,{className:"w-8 h-8"})}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Settings"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize your dashboard"})]})]})]}),A?e.jsx("div",{className:"flex items-center justify-center py-12 lg:py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading your accounts..."})]})}):a.length===0?e.jsx("div",{className:"text-center py-12 lg:py-20",children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-100 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8 lg:p-12 max-w-md mx-auto shadow-lg border border-indigo-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 mb-4 lg:mb-6 flex justify-center",children:e.jsx(U,{className:"w-16 h-16 lg:w-20 lg:h-20"})}),e.jsx("h3",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"No accounts yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-base lg:text-lg",children:"Get started by adding your first OSRS account"}),e.jsx("button",{onClick:()=>c("create"),className:"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white font-bold py-3 px-6 lg:px-8 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg",children:"Add Your First Account"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-900 dark:text-white",children:"Your Accounts"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:a.map(l)})]})]}),g=()=>e.jsxs("div",{className:"space-y-4 lg:space-y-6 p-4 lg:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Account Status"}),e.jsx("div",{className:"space-y-3",children:Object.entries(T).map(([r,d])=>{const R=a.filter(te=>te.state===r).length,re=a.length>0?R/a.length*100:0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:d.icon}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:d.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 lg:w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:u("h-2 rounded-full transition-all duration-500",d.color==="green"&&"bg-green-500",d.color==="red"&&"bg-red-500",d.color==="yellow"&&"bg-yellow-500",d.color==="gray"&&"bg-gray-500"),style:{width:`${re}%`}})}),e.jsx("span",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 w-6 lg:w-8 text-right",children:R})]})]},r)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map((r,d)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm font-bold flex-shrink-0",children:r.account_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:r.account_name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created ",new Date(r.created_at).toLocaleDateString()]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:T[r.state].icon})]},r.account_name)),a.length===0&&e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No accounts to show"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Account Overview"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl lg:text-2xl font-bold text-blue-600 dark:text-blue-400",children:[a.filter(r=>r.p2p).length,"/",a.length]}),e.jsx("div",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Premium Accounts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter(r=>r.world).length}),e.jsx("div",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Active Worlds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl lg:text-2xl font-bold text-purple-600 dark:text-purple-400",children:[a.length>0?Math.round(a.filter(r=>r.state==="active").length/a.length*100):0,"%"]}),e.jsx("div",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Active Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-orange-600 dark:text-orange-400",children:a.length>0?Math.ceil((Date.now()-new Date(a[0]?.created_at||Date.now()).getTime())/(1e3*60*60*24)):0}),e.jsx("div",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400",children:"Days Since First"})]})]})]})]}),J=()=>e.jsxs("div",{className:"space-y-4 lg:space-y-6 p-4 lg:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"General Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Auto-refresh accounts"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:"Automatically refresh account data"})]}),e.jsx("div",{className:"w-12 h-6 bg-blue-600 rounded-full flex items-center justify-end px-1 flex-shrink-0",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Compact view"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:"Show more accounts per row"})]}),e.jsx("div",{className:"w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center px-1 flex-shrink-0",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm lg:text-base",children:"Show tooltips"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:"Display helpful tooltips"})]}),e.jsx("div",{className:"w-12 h-6 bg-blue-600 rounded-full flex items-center justify-end px-1 flex-shrink-0",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{className:"w-full p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg text-left hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200",children:[e.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-300 text-sm lg:text-base",children:"Export Data"}),e.jsx("div",{className:"text-xs lg:text-sm text-blue-700 dark:text-blue-400",children:"Download your account data"})]}),e.jsxs("button",{className:"w-full p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg text-left hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors duration-200",children:[e.jsx("div",{className:"font-medium text-green-900 dark:text-green-300 text-sm lg:text-base",children:"Backup Settings"}),e.jsx("div",{className:"text-xs lg:text-sm text-green-700 dark:text-green-400",children:"Save your configuration"})]}),e.jsxs("button",{className:"w-full p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-left hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors duration-200",children:[e.jsx("div",{className:"font-medium text-red-900 dark:text-red-300 text-sm lg:text-base",children:"Clear Cache"}),e.jsx("div",{className:"text-xs lg:text-sm text-red-700 dark:text-red-400",children:"Reset stored data"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 lg:p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"About"}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-orange-600 dark:text-orange-400 mb-4 flex justify-center",children:e.jsx($,{className:"w-12 h-12 lg:w-16 lg:h-16"})}),e.jsx("h4",{className:"text-lg lg:text-xl font-bold text-gray-900 dark:text-white mb-2",children:"OSRS Dashboard"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-4",children:"A modern interface for managing your Old School RuneScape accounts"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 lg:gap-6 text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Version 2.0.0"}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{children:"Built with React & Tailwind"}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{children:"Powered by Supabase"})]})]})]})]}),X=()=>b?e.jsx("div",{className:"p-6",children:e.jsx(we,{accountName:b,onSuccess:()=>{i()},onCancel:()=>c("dashboard")})}):e.jsx("div",{className:"text-center py-12 p-6",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-12",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400 mb-4 flex justify-center",children:e.jsx(G,{className:"w-12 h-12"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No Account Selected"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please select an account from the dashboard"})]})}),Z=()=>e.jsx("div",{className:"p-4 lg:p-6 max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 lg:p-6 text-white",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold mb-2",children:"Add New OSRS Account"}),e.jsx("p",{className:"text-blue-100",children:"Create a new account entry in your dashboard"})]}),e.jsx("div",{className:"p-4 lg:p-6",children:e.jsx(ve,{onSuccess:L,onCancel:()=>c("dashboard")})})]})}),ee=()=>b?e.jsx("div",{className:"p-4 lg:p-6 max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 lg:p-6 text-white",children:[e.jsxs("h2",{className:"text-xl lg:text-2xl font-bold mb-2",children:["Edit Account: ",b]}),e.jsx("p",{className:"text-purple-100",children:"Update account information and settings"})]}),e.jsx("div",{className:"p-4 lg:p-6",children:e.jsxs("div",{className:"text-center py-8 lg:py-12",children:[e.jsx("div",{className:"text-purple-600 dark:text-purple-400 mb-4 flex justify-center",children:e.jsx(me,{className:"w-12 h-12 lg:w-16 lg:h-16"})}),e.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Account editing features are currently in development"}),e.jsx("button",{onClick:()=>c("dashboard"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200",children:"Back to Dashboard"})]})})]})}):e.jsx("div",{className:"text-center py-12 p-4 lg:p-6",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-8 lg:p-12 max-w-md mx-auto",children:[e.jsx("div",{className:"text-orange-600 dark:text-orange-400 mb-4 flex justify-center",children:e.jsx(z,{className:"w-12 h-12 lg:w-16 lg:h-16"})}),e.jsx("h3",{className:"text-lg lg:text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No Account Selected"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please select an account to edit"})]})});return e.jsxs("div",{className:q("w-full h-full max-h-[calc(100vh-2rem)] flex bg-gray-50 dark:bg-gray-900 rounded-xl shadow-2xl overflow-hidden relative",m),children:[p&&e.jsx("div",{className:"absolute top-4 right-4 z-50 max-w-sm p-4 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 flex-shrink-0",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-red-800 dark:text-red-200 font-medium text-sm",children:p})]}),e.jsx("button",{onClick:()=>N(null),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 transition-colors duration-200 text-lg leading-none flex-shrink-0",children:"×"})]})}),F(),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0",children:[S(),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:[n==="dashboard"&&w(),n==="create"&&Z(),n==="details"&&X(),n==="edit"&&ee(),n==="analytics"&&g(),n==="settings"&&J()]})]})]})}export{qe as OsrsApp};
