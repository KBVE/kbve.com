import{r as i}from"./react.BO4Kayu4.js";function E(t,r){let o;return(...s)=>{window.clearTimeout(o),o=window.setTimeout(()=>t(...s),r)}}function X({debounce:t,scroll:r,polyfill:o,offsetSize:s}={debounce:0,scroll:!1,offsetSize:!1}){const a=o||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[u,h]=i.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),e=i.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u,orientationHandler:null}),d=t?typeof t=="number"?t:t.scroll:null,f=t?typeof t=="number"?t:t.resize:null,w=i.useRef(!1);i.useEffect(()=>(w.current=!0,()=>void(w.current=!1)));const[g,m,c]=i.useMemo(()=>{const n=()=>{if(!e.current.element)return;const{left:L,top:y,width:C,height:H,bottom:O,right:x,x:R,y:S}=e.current.element.getBoundingClientRect(),l={left:L,top:y,width:C,height:H,bottom:O,right:x,x:R,y:S};e.current.element instanceof HTMLElement&&s&&(l.height=e.current.element.offsetHeight,l.width=e.current.element.offsetWidth),Object.freeze(l),w.current&&!M(e.current.lastBounds,l)&&h(e.current.lastBounds=l)};return[n,f?E(n,f):n,d?E(n,d):n]},[h,s,d,f]);function v(){e.current.scrollContainers&&(e.current.scrollContainers.forEach(n=>n.removeEventListener("scroll",c,!0)),e.current.scrollContainers=null),e.current.resizeObserver&&(e.current.resizeObserver.disconnect(),e.current.resizeObserver=null),e.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",e.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",e.current.orientationHandler))}function b(){e.current.element&&(e.current.resizeObserver=new a(c),e.current.resizeObserver.observe(e.current.element),r&&e.current.scrollContainers&&e.current.scrollContainers.forEach(n=>n.addEventListener("scroll",c,{capture:!0,passive:!0})),e.current.orientationHandler=()=>{c()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",e.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",e.current.orientationHandler))}const z=n=>{!n||n===e.current.element||(v(),e.current.element=n,e.current.scrollContainers=p(n),b())};return T(c,!!r),B(m),i.useEffect(()=>{v(),b()},[r,c,m]),i.useEffect(()=>v,[]),[z,u,g]}function B(t){i.useEffect(()=>{const r=t;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[t])}function T(t,r){i.useEffect(()=>{if(r){const o=t;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[t,r])}function p(t){const r=[];if(!t||t===document.body)return r;const{overflow:o,overflowX:s,overflowY:a}=window.getComputedStyle(t);return[o,s,a].some(u=>u==="auto"||u==="scroll")&&r.push(t),[...r,...p(t.parentElement)]}const j=["x","y","top","bottom","left","right","width","height"],M=(t,r)=>j.every(o=>t[o]===r[o]);export{X as j};
