import{s as j,p as q}from"./d3-selection.DSeOx27A.js";import{d as H}from"./d3-dispatch.kxCwF96_.js";const J={passive:!1},v={capture:!0,passive:!1};function P(e){e.stopImmediatePropagation()}function y(e){e.preventDefault(),e.stopImmediatePropagation()}function L(e){var t=e.document.documentElement,n=j(e).on("dragstart.drag",y,v);"onselectstart"in t?n.on("selectstart.drag",y,v):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Q(e,t){var n=e.document.documentElement,o=j(e).on("dragstart.drag",null);t&&(o.on("click.drag",y,v),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const k=e=>()=>e;function S(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:a,x:i,y:u,dx:c,dy:l,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:s}})}function R(e){return!e.ctrlKey&&!e.button}function V(){return this.parentNode}function W(e,t){return t??{x:e.x,y:e.y}}function Z(){return navigator.maxTouchPoints||"ontouchstart"in this}function ee(){var e,t,n,o,r=R,a=V,i=W,u=Z,c={},l=H("start","drag","end"),s=0,f=0;function d(e){e.on("mousedown.drag",g).filter(u).on("touchstart.drag",p).on("touchmove.drag",b,J).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(i,u){if(!o&&r.call(this,i,u)){var c=_(this,a.call(this,i,u),i,u,"mouse");c&&(j(i.view).on("mousemove.drag",h,v).on("mouseup.drag",m,v),L(i.view),P(i),n=!1,e=i.clientX,t=i.clientY,c("start",i))}}function h(o){if(y(o),!n){var r=o.clientX-e,a=o.clientY-t;n=r*r+a*a>f}c.mouse("drag",o)}function m(e){j(e.view).on("mousemove.drag mouseup.drag",null),Q(e.view,n),y(e),c.mouse("end",e)}function p(e,t){if(r.call(this,e,t)){var n,o,i=e.changedTouches,u=a.call(this,e,t),c=i.length;for(n=0;n<c;++n)(o=_(this,u,e,t,i[n].identifier,i[n]))&&(P(e),o("start",e,i[n]))}}function b(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=c[o[t].identifier])&&(y(e),n("drag",e,o[t]))}function x(e){var t,n,r=e.changedTouches,a=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<a;++t)(n=c[r[t].identifier])&&(P(e),n("end",e,r[t]))}function _(e,t,n,o,r,a){var u,f,g,v=l.copy(),h=q(a||n,t);if(null!=(g=i.call(e,new S("beforestart",{sourceEvent:n,target:d,identifier:r,active:s,x:h[0],y:h[1],dx:0,dy:0,dispatch:v}),o)))return u=g.x-h[0]||0,f=g.y-h[1]||0,function n(a,i,l){var m,y=h;switch(a){case"start":c[r]=n,m=s++;break;case"end":delete c[r],--s;case"drag":h=q(l||i,t),m=s}v.call(a,e,new S(a,{sourceEvent:i,subject:g,target:d,identifier:r,active:m,x:h[0]+u,y:h[1]+f,dx:h[0]-y[0],dy:h[1]-y[1],dispatch:v}),o)}}return d.filter=function(e){return arguments.length?(r="function"==typeof e?e:k(!!e),d):r},d.container=function(e){return arguments.length?(a="function"==typeof e?e:k(e),d):a},d.subject=function(e){return arguments.length?(i="function"==typeof e?e:k(e),d):i},d.touchable=function(e){return arguments.length?(u="function"==typeof e?e:k(!!e),d):u},d.on=function(){var e=l.on.apply(l,arguments);return e===l?d:e},d.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,d):Math.sqrt(f)},d}S.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};export{ee as a,L as d,Q as y};