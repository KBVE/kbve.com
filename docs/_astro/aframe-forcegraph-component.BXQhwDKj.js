import{r as y}from"./accessor-fn.DXlyMOTY.js";import{r as b}from"./three-forcegraph.BMYJjUj0.js";var h={},k;function g(){if(k)return h;if(k=1,typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");let u=y;"default"in u&&(u=u.default);let o=b;"default"in o&&(o=o.default);const d=function(e){return typeof e=="string"?JSON.parse(e):e},a=function(e){if(typeof e=="function")return e;const i=eval;try{return i("("+e+")")}catch{}return null},n=function(e){return isNaN(parseFloat(e))?a(e)?a(e):e:parseFloat(e)};return AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:d,default:[]},links:{parse:d,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:a,default:function(){return!0}},onDagError:{parse:a,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeVal:{parse:n,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:n,default:!0},nodeColor:{parse:n,default:"color"},nodeAutoColorBy:{parse:n,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:n,default:null},nodeThreeObjectExtend:{parse:n,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkVisibility:{parse:n,default:!0},linkColor:{parse:n,default:"color"},linkAutoColorBy:{parse:n,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:n,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:n,default:0},linkCurveRotation:{parse:n,default:0},linkMaterial:{parse:n,default:null},linkThreeObject:{parse:n,default:null},linkThreeObjectExtend:{parse:n,default:!1},linkPositionUpdate:{parse:a,default:null},linkDirectionalArrowLength:{parse:n,default:0},linkDirectionalArrowColor:{parse:n,default:null},linkDirectionalArrowRelPos:{parse:n,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:n,default:0},linkDirectionalParticleSpeed:{parse:n,default:.01},linkDirectionalParticleWidth:{parse:n,default:.5},linkDirectionalParticleColor:{parse:n,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeHover:{parse:a,default:()=>{}},onLinkHover:{parse:a,default:()=>{}},onNodeClick:{parse:a,default:()=>{}},onLinkClick:{parse:a,default:()=>{}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:d,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:a,default:function(){}},onEngineStop:{parse:a,default:function(){}}},getGraphBbox:function(){return this.forceGraph||(this.forceGraph=new o),this.forceGraph.getGraphBbox()},emitParticle:function(){this.forceGraph||(this.forceGraph=new o);const e=this.forceGraph,i=e.emitParticle.apply(e,arguments);return i===e?this:i},d3Force:function(){this.forceGraph||(this.forceGraph=new o);const e=this.forceGraph,i=e.d3Force.apply(e,arguments);return i===e?this:i},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){const e=this.state={};e.infoEl=document.createElement("a-text"),e.infoEl.setAttribute("position","0 -0.1 -1"),e.infoEl.setAttribute("width",1),e.infoEl.setAttribute("align","center"),e.infoEl.setAttribute("color","lavender");const i=document.querySelector("a-entity[camera], a-camera");i.appendChild(e.infoEl),e.cameraObj=i.object3D.children.filter(function(t){return t.type==="PerspectiveCamera"})[0],this.el.sceneEl.addEventListener("camera-set-active",function(t){e.cameraObj=t.detail.cameraEl.components.camera.camera}),this.forceGraph||(this.forceGraph=new o),this.forceGraph.onFinishUpdate(()=>this.el.setObject3D("forcegraphGroup",this.forceGraph)).onLoading(()=>e.infoEl.setAttribute("value","Loading...")).onFinishLoading(()=>e.infoEl.setAttribute("value","")),this.el.addEventListener("raycaster-intersected",t=>e.hoverDetail=t.detail),this.el.addEventListener("raycaster-intersected-cleared",t=>e.hoverDetail=t.detail),this.el.addEventListener("click",()=>e.hoverObj&&this.data["on"+(e.hoverObj.__graphObjType==="node"?"Node":"Link")+"Click"](e.hoverObj.__data))},remove:function(){this.state.infoEl.remove(),this.el.removeObject3D("forcegraphGroup")},update:function(e){const i=this,t=this.data,l=AFRAME.utils.diff(t,e);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter(function(r){return r in l}).forEach(function(r){i.forceGraph[r](t[r]!==""?t[r]:null)}),("nodes"in l||"links"in l)&&i.forceGraph.graphData({nodes:t.nodes,links:t.links})},tick:function(e,i){const t=this.state,l=this.data,f=t.hoverDetail?t.hoverDetail.getIntersection?t.hoverDetail.getIntersection(this.el):t.hoverDetail.intersection||void 0:void 0;let r=f?f.object:void 0;for(;r&&!r.hasOwnProperty("__graphObjType");)r=r.parent;if(r!==t.hoverObj){const s=t.hoverObj?t.hoverObj.__graphObjType:null,p=t.hoverObj?t.hoverObj.__data:null,c=r?r.__graphObjType:null,m=r?r.__data:null;s&&s!==c&&l["on"+(s==="node"?"Node":"Link")+"Hover"](null,p),c&&l["on"+(c==="node"?"Node":"Link")+"Hover"](m,s===c?p:null),t.hoverObj=r}this.forceGraph.tickFrame()}}),h}g();
