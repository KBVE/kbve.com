import{_ as J,a as y}from"./@babel.iCE8PrbV.js";import{r as A}from"./react.CvslfkeK.js";var G=Object.defineProperty,X=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,k=(e,r,n)=>r in e?G(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,v=(e,r)=>{for(var n in r||(r={}))D.call(r,n)&&k(e,n,r[n]);if(_)for(var n of _(r))$.call(r,n)&&k(e,n,r[n]);return e},B=(e,r)=>X(e,Q(r)),Y=(e,r)=>{var n={};for(var a in e)D.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&_)for(var a of _(e))r.indexOf(a)<0&&$.call(e,a)&&(n[a]=e[a]);return n},u=(e,r,n)=>(k(e,typeof r!="symbol"?r+"":r,n),n),R=(e,r,n)=>new Promise((a,t)=>{var i=h=>{try{o(n.next(h))}catch(c){t(c)}},s=h=>{try{o(n.throw(h))}catch(c){t(c)}},o=h=>h.done?a(h.value):Promise.resolve(h.value).then(i,s);o((n=n.apply(e,r)).next())}),Z="hCaptcha-script",O="hCaptchaOnLoad",L="script-error",x="@hCaptcha/loader";function ee(e){return Object.entries(e).filter(([,r])=>r||r===!1).map(([r,n])=>`${encodeURIComponent(r)}=${encodeURIComponent(String(n))}`).join("&")}function F(e){let r=e&&e.ownerDocument||document,n=r.defaultView||r.parentWindow||window;return{document:r,window:n}}function H(e){return e||document.head}function te(e){var r;e.setTag("source",x),e.setTag("url",document.URL),e.setContext("os",{UA:navigator.userAgent}),e.setContext("browser",v({},re())),e.setContext("device",B(v({},ne()),{screen_width_pixels:screen.width,screen_height_pixels:screen.height,language:navigator.language,orientation:((r=screen.orientation)==null?void 0:r.type)||"Unknown",processor_count:navigator.hardwareConcurrency,platform:navigator.platform}))}function re(){var e,r,n,a,t,i;let s=navigator.userAgent,o,h;return s.indexOf("Firefox")!==-1?(o="Firefox",h=(e=s.match(/Firefox\/([\d.]+)/))==null?void 0:e[1]):s.indexOf("Edg")!==-1?(o="Microsoft Edge",h=(r=s.match(/Edg\/([\d.]+)/))==null?void 0:r[1]):s.indexOf("Chrome")!==-1&&s.indexOf("Safari")!==-1?(o="Chrome",h=(n=s.match(/Chrome\/([\d.]+)/))==null?void 0:n[1]):s.indexOf("Safari")!==-1&&s.indexOf("Chrome")===-1?(o="Safari",h=(a=s.match(/Version\/([\d.]+)/))==null?void 0:a[1]):s.indexOf("Opera")!==-1||s.indexOf("OPR")!==-1?(o="Opera",h=(t=s.match(/(Opera|OPR)\/([\d.]+)/))==null?void 0:t[2]):s.indexOf("MSIE")!==-1||s.indexOf("Trident")!==-1?(o="Internet Explorer",h=(i=s.match(/(MSIE |rv:)([\d.]+)/))==null?void 0:i[2]):(o="Unknown",h="Unknown"),{name:o,version:h}}function ne(){let e=navigator.userAgent,r;e.indexOf("Win")!==-1?r="Windows":e.indexOf("Mac")!==-1?r="Mac":e.indexOf("Linux")!==-1?r="Linux":e.indexOf("Android")!==-1?r="Android":e.indexOf("like Mac")!==-1||e.indexOf("iPhone")!==-1||e.indexOf("iPad")!==-1?r="iOS":r="Unknown";let n;return/Mobile|iPhone|iPod|Android/i.test(e)?n="Mobile":/Tablet|iPad/i.test(e)?n="Tablet":n="Desktop",{model:r,family:r,device:n}}var ae=class N{constructor(r){u(this,"_parent"),u(this,"breadcrumbs",[]),u(this,"context",{}),u(this,"extra",{}),u(this,"tags",{}),u(this,"request"),u(this,"user"),this._parent=r}get parent(){return this._parent}child(){return new N(this)}setRequest(r){return this.request=r,this}removeRequest(){return this.request=void 0,this}addBreadcrumb(r){return typeof r.timestamp>"u"&&(r.timestamp=new Date().toISOString()),this.breadcrumbs.push(r),this}setExtra(r,n){return this.extra[r]=n,this}removeExtra(r){return delete this.extra[r],this}setContext(r,n){return typeof n.type>"u"&&(n.type=r),this.context[r]=n,this}removeContext(r){return delete this.context[r],this}setTags(r){return this.tags=v(v({},this.tags),r),this}setTag(r,n){return this.tags[r]=n,this}removeTag(r){return delete this.tags[r],this}setUser(r){return this.user=r,this}removeUser(){return this.user=void 0,this}toBody(){let r=[],n=this;for(;n;)r.push(n),n=n.parent;return r.reverse().reduce((a,t)=>{var i;return a.breadcrumbs=[...(i=a.breadcrumbs)!=null?i:[],...t.breadcrumbs],a.extra=v(v({},a.extra),t.extra),a.contexts=v(v({},a.contexts),t.context),a.tags=v(v({},a.tags),t.tags),t.user&&(a.user=t.user),t.request&&(a.request=t.request),a},{breadcrumbs:[],extra:{},contexts:{},tags:{},request:void 0,user:void 0})}clear(){this.breadcrumbs=[],this.context={},this.tags={},this.user=void 0}},ie=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,se=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,oe=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ce=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,C="?",U="An unknown error occurred",he="0.0.4";function le(e){for(let r=0;r<e.length;r++)e[r]=Math.floor(Math.random()*256);return e}function p(e){return(e+256).toString(16).substring(1)}function ue(){let e=le(new Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,p(e[0])+p(e[1])+p(e[2])+p(e[3])+"-"+p(e[4])+p(e[5])+"-"+p(e[6])+p(e[7])+"-"+p(e[8])+p(e[9])+"-"+p(e[10])+p(e[11])+p(e[12])+p(e[13])+p(e[14])+p(e[15])}var de=[[ie,"chrome"],[oe,"winjs"],[se,"gecko"]];function pe(e){var r,n,a,t;if(!e.stack)return null;let i=[],s=(a=(n=(r=e.stack).split)==null?void 0:n.call(r,`
`))!=null?a:[];for(let o=0;o<s.length;++o){let h=null,c=null,l=null;for(let[m,g]of de)if(c=m.exec(s[o]),c){l=g;break}if(!(!c||!l)){if(l==="chrome")h={filename:(t=c[2])!=null&&t.startsWith("address at ")?c[2].substring(11):c[2],function:c[1]||C,lineno:c[3]?+c[3]:null,colno:c[4]?+c[4]:null};else if(l==="winjs")h={filename:c[2],function:c[1]||C,lineno:+c[3],colno:c[4]?+c[4]:null};else if(l==="gecko")o===0&&!c[5]&&e.columnNumber!==void 0&&i.length>0&&(i[0].column=e.columnNumber+1),h={filename:c[3],function:c[1]||C,lineno:c[4]?+c[4]:null,colno:c[5]?+c[5]:null};else continue;!h.function&&h.lineno&&(h.function=C),i.push(h)}}return i.length?i.reverse():null}function fe(e){let r=pe(e);return{type:e.name,value:e.message,stacktrace:{frames:r??[]}}}function me(e){let r=ce.exec(e),n=r?r.slice(1):[];if(n.length!==6)throw new Error("Invalid DSN");let a=n[5].split("/"),t=a.slice(0,-1).join("/");return n[0]+"://"+n[3]+(n[4]?":"+n[4]:"")+(t?"/"+t:"")+"/api/"+a.pop()+"/envelope/?sentry_version=7&sentry_key="+n[1]+(n[2]?"&sentry_secret="+n[2]:"")}function ve(e,r,n){var a,t;let i=v({event_id:ue().replaceAll("-",""),platform:"javascript",sdk:{name:"@hcaptcha/sentry",version:he},environment:r,release:n,timestamp:Date.now()/1e3},e.scope.toBody());if(e.type==="exception"){i.message=(t=(a=e.error)==null?void 0:a.message)!=null?t:"Unknown error",i.fingerprint=[i.message];let s=[],o=e.error;for(let h=0;h<5&&o&&(s.push(fe(o)),!(!o.cause||!(o.cause instanceof Error)));h++)o=o.cause;i.exception={values:s.reverse()}}return e.type==="message"&&(i.message=e.message,i.level=e.level),i}function ye(e){if(e instanceof Error)return e;if(typeof e=="string")return new Error(e);if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let n=e,{message:a}=n,t=Y(n,["message"]),i=new Error(typeof a=="string"?a:U);return Object.assign(i,t)}let r=new Error(U);return Object.assign(r,{cause:e})}function ge(e,r,n){return R(this,null,function*(){var a,t;try{if(typeof fetch<"u"&&typeof AbortSignal<"u"){let i;if(n){let h=new AbortController;i=h.signal,setTimeout(()=>h.abort(),n)}let s=yield fetch(e,B(v({},r),{signal:i})),o=yield s.text();return{status:s.status,body:o}}return yield new Promise((i,s)=>{var o,h;let c=new XMLHttpRequest;if(c.open((o=r?.method)!=null?o:"GET",e),c.onload=()=>i({status:c.status,body:c.responseText}),c.onerror=()=>s(new Error("XHR Network Error")),r?.headers)for(let[l,m]of Object.entries(r.headers))c.setRequestHeader(l,m);if(n){let l=setTimeout(()=>{c.abort(),s(new Error("Request timed out"))},n);c.onloadend=()=>{clearTimeout(l)}}c.send((h=r?.body)==null?void 0:h.toString())})}catch(i){return{status:0,body:(t=(a=i?.toString)==null?void 0:a.call(i))!=null?t:"Unknown error"}}})}var f,j=(f=class{constructor(e){u(this,"apiURL"),u(this,"dsn"),u(this,"environment"),u(this,"release"),u(this,"sampleRate"),u(this,"debug"),u(this,"_scope"),u(this,"shouldBuffer",!1),u(this,"bufferlimit",20),u(this,"buffer",[]);var r,n,a,t,i;this.environment=e.environment,this.release=e.release,this.sampleRate=(r=e.sampleRate)!=null?r:1,this.debug=(n=e.debug)!=null?n:!1,this._scope=(a=e.scope)!=null?a:new ae,this.apiURL=me(e.dsn),this.dsn=e.dsn,this.shouldBuffer=(t=e.buffer)!=null?t:!1,this.bufferlimit=(i=e.bufferLimit)!=null?i:20}static init(e){f._instance||(f._instance=new f(e))}static get instance(){if(!f._instance)throw new Error("Sentry has not been initialized");return f._instance}log(...e){this.debug&&console.log(...e)}get scope(){return this._scope}static get scope(){return f.instance.scope}withScope(e){let r=this._scope.child();e(r)}static withScope(e){f.instance.withScope(e)}captureException(e,r){this.captureEvent({type:"exception",level:"error",error:ye(e),scope:r??this._scope})}static captureException(e,r){f.instance.captureException(e,r)}captureMessage(e,r="info",n){this.captureEvent({type:"message",level:r,message:e,scope:n??this._scope})}static captureMessage(e,r="info",n){f.instance.captureMessage(e,r,n)}captureEvent(e){if(Math.random()>=this.sampleRate){this.log("Dropped event due to sample rate");return}if(this.shouldBuffer){if(this.buffer.length>=this.bufferlimit)return;this.buffer.push(e)}else this.sendEvent(e)}sendEvent(e,r=5e3){return R(this,null,function*(){try{this.log("Sending sentry event",e);let n=ve(e,this.environment,this.release),a={event_id:n.event_id,dsn:this.dsn},t={type:"event"},i=JSON.stringify(a)+`
`+JSON.stringify(t)+`
`+JSON.stringify(n),s=yield ge(this.apiURL,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:i},r);this.log("Sentry response",s.status),s.status!==200&&(console.log(s.body),console.error("Failed to send event to Sentry",s))}catch(n){console.error("Failed to send event",n)}})}flush(e=5e3){return R(this,null,function*(){try{this.log("Flushing sentry events",this.buffer.length);let r=this.buffer.splice(0,this.buffer.length).map(n=>this.sendEvent(n,e));yield Promise.all(r),this.log("Flushed all events")}catch(r){console.error("Failed to flush events",r)}})}static flush(e=5e3){return f.instance.flush(e)}static reset(){f._instance=void 0}},u(f,"_instance"),f),be="https://d233059272824702afc8c43834c4912d@sentry.hcaptcha.com/6",xe="2.0.0",we="production";function Re(e=!0){if(!e)return q();j.init({dsn:be,release:xe,environment:we});let r=j.scope;return te(r),q(r)}function q(e=null){return{addBreadcrumb:r=>{e&&e.addBreadcrumb(r)},captureRequest:r=>{e&&e.setRequest(r)},captureException:r=>{e&&j.captureException(r,e)}}}function Ce({scriptLocation:e,query:r,loadAsync:n=!0,crossOrigin:a,apihost:t="https://js.hcaptcha.com",cleanup:i=!0,secureApi:s=!1,scriptSource:o=""}={},h){let c=H(e),l=F(c);return new Promise((m,g)=>{let d=l.document.createElement("script");d.id=Z,o?d.src=`${o}?onload=${O}`:s?d.src=`${t}/1/secure-api.js?onload=${O}`:d.src=`${t}/1/api.js?onload=${O}`,d.crossOrigin=a,d.async=n;let w=(b,S)=>{try{!s&&i&&c.removeChild(d),S(b)}catch(I){g(I)}};d.onload=b=>w(b,m),d.onerror=b=>{h&&h(d.src),w(b,g)},d.src+=r!==""?`&${r}`:"",c.appendChild(d)})}var E=[];function Ee(e={cleanup:!0},r){try{r.addBreadcrumb({category:x,message:"hCaptcha loader params",data:e});let n=H(e.scriptLocation),a=F(n),t=E.find(({scope:s})=>s===a.window);if(t)return r.addBreadcrumb({category:x,message:"hCaptcha already loaded"}),t.promise;let i=new Promise((s,o)=>R(this,null,function*(){try{a.window[O]=()=>{r.addBreadcrumb({category:x,message:"hCaptcha script called onload function"}),s(a.window.hcaptcha)};let h=ee({custom:e.custom,render:e.render,sentry:e.sentry,assethost:e.assethost,imghost:e.imghost,reportapi:e.reportapi,endpoint:e.endpoint,host:e.host,recaptchacompat:e.recaptchacompat,hl:e.hl});yield Ce(v({query:h},e),c=>{r.captureRequest({url:c,method:"GET"})}),r.addBreadcrumb({category:x,message:"hCaptcha loaded",data:t})}catch{r.addBreadcrumb({category:x,message:"hCaptcha failed to load"});let c=E.findIndex(l=>l.scope===a.window);c!==-1&&E.splice(c,1),o(new Error(L))}}));return E.push({promise:i,scope:a.window}),i}catch(n){return r.captureException(n),Promise.reject(new Error(L))}}function W(e,r,n=0){return R(this,null,function*(){let a=n<2?"Retry loading hCaptcha Api":"Exceeded maximum retries";try{return yield Ee(e,r)}catch(t){return r.addBreadcrumb({category:x,message:a}),n>=2?(r.captureException(t),Promise.reject(t)):(n+=1,W(e,r,n))}})}function Oe(){return R(this,arguments,function*(e={}){let r=Re(e.sentry);return yield W(e,r)})}function M(e){var r=e&&e.ownerDocument||document,n=r.defaultView||r.parentWindow||window;return{document:r,window:n}}function T(e){return e||document.head}var Ie=function(e){J(r,e);function r(a){var t;return t=e.call(this,a)||this,t._hcaptcha=void 0,t.renderCaptcha=t.renderCaptcha.bind(y(t)),t.resetCaptcha=t.resetCaptcha.bind(y(t)),t.removeCaptcha=t.removeCaptcha.bind(y(t)),t.isReady=t.isReady.bind(y(t)),t._onReady=null,t.loadCaptcha=t.loadCaptcha.bind(y(t)),t.handleOnLoad=t.handleOnLoad.bind(y(t)),t.handleSubmit=t.handleSubmit.bind(y(t)),t.handleExpire=t.handleExpire.bind(y(t)),t.handleError=t.handleError.bind(y(t)),t.handleOpen=t.handleOpen.bind(y(t)),t.handleClose=t.handleClose.bind(y(t)),t.handleChallengeExpired=t.handleChallengeExpired.bind(y(t)),t.ref=A.createRef(),t.apiScriptRequested=!1,t.sentryHub=null,t.captchaId="",t.state={isApiReady:!1,isRemoved:!1,elementId:a.id},t}var n=r.prototype;return n.componentDidMount=function(){var t=this,i=T(this.props.scriptLocation),s=M(i);this._hcaptcha=s.window.hcaptcha||void 0;var o=typeof this._hcaptcha<"u";if(o){this.setState({isApiReady:!0},function(){t.renderCaptcha()});return}this.loadCaptcha()},n.componentWillUnmount=function(){var t=this._hcaptcha,i=this.captchaId;this.isReady()&&(t.reset(i),t.remove(i))},n.shouldComponentUpdate=function(t,i){return!(this.state.isApiReady!==i.isApiReady||this.state.isRemoved!==i.isRemoved)},n.componentDidUpdate=function(t){var i=this,s=["sitekey","size","theme","tabindex","languageOverride","endpoint"],o=s.every(function(h){return t[h]===i.props[h]});o||this.removeCaptcha(function(){i.renderCaptcha()})},n.loadCaptcha=function(){if(!this.apiScriptRequested){var t=this.props,i=t.apihost,s=t.assethost,o=t.endpoint,h=t.host,c=t.imghost,l=t.languageOverride,m=t.reCaptchaCompat,g=t.reportapi,d=t.sentry,w=t.custom,b=t.loadAsync,S=t.scriptLocation,I=t.scriptSource,z=t.secureApi,P=t.cleanup,V=P===void 0?!0:P,K={render:"explicit",apihost:i,assethost:s,endpoint:o,hl:l,host:h,imghost:c,recaptchacompat:m===!1?"off":null,reportapi:g,sentry:d,custom:w,loadAsync:b,scriptLocation:S,scriptSource:I,secureApi:z,cleanup:V};Oe(K).then(this.handleOnLoad,this.handleError).catch(this.handleError),this.apiScriptRequested=!0}},n.renderCaptcha=function(t){var i=this,s=this.props.onReady,o=this.state.isApiReady,h=this.captchaId;if(!(!o||h)){var c=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),l=this._hcaptcha,m=l.render(this.ref.current,c);this.captchaId=m,this.setState({isRemoved:!1},function(){t&&t(),s&&s(),i._onReady&&i._onReady(m)})}},n.resetCaptcha=function(){var t=this._hcaptcha,i=this.captchaId;this.isReady()&&t.reset(i)},n.removeCaptcha=function(t){var i=this,s=this._hcaptcha,o=this.captchaId;this.isReady()&&this.setState({isRemoved:!0},function(){i.captchaId="",s.remove(o),t&&t()})},n.handleOnLoad=function(){var t=this;this.setState({isApiReady:!0},function(){var i=T(t.props.scriptLocation),s=M(i);t._hcaptcha=s.window.hcaptcha,t.renderCaptcha(function(){var o=t.props.onLoad;o&&o()})})},n.handleSubmit=function(t){var i=this.props.onVerify,s=this.state.isRemoved,o=this._hcaptcha,h=this.captchaId;if(!(typeof o>"u"||s)){var c=o.getResponse(h),l=o.getRespKey(h);i&&i(c,l)}},n.handleExpire=function(){var t=this.props.onExpire,i=this._hcaptcha,s=this.captchaId;this.isReady()&&(i.reset(s),t&&t())},n.handleError=function(t){var i=this.props.onError,s=this._hcaptcha,o=this.captchaId;this.isReady()&&s.reset(o),i&&i(t)},n.isReady=function(){var t=this.state,i=t.isApiReady,s=t.isRemoved;return i&&!s},n.handleOpen=function(){!this.isReady()||!this.props.onOpen||this.props.onOpen()},n.handleClose=function(){!this.isReady()||!this.props.onClose||this.props.onClose()},n.handleChallengeExpired=function(){!this.isReady()||!this.props.onChalExpired||this.props.onChalExpired()},n.execute=function(t){var i=this;t===void 0&&(t=null),t=typeof t=="object"?t:null;try{var s=this._hcaptcha,o=this.captchaId;if(!this.isReady()){var h,c=new Promise(function(l,m){i._onReady=function(g){try{var d=i._hcaptcha;t&&t.async?d.execute(g,t).then(l).catch(m):l(d.execute(g,t))}catch(w){m(w)}}});return(h=t)!=null&&h.async?c:null}return s.execute(o,t)}catch(l){return t&&t.async?Promise.reject(l):null}},n.close=function(){var t=this._hcaptcha,i=this.captchaId;if(this.isReady())return t.close(i)},n.setData=function(t){var i=this._hcaptcha,s=this.captchaId;this.isReady()&&(t&&typeof t!="object"&&(t=null),i.setData(s,t))},n.getResponse=function(){var t=this._hcaptcha;return t.getResponse(this.captchaId)},n.getRespKey=function(){var t=this._hcaptcha;return t.getRespKey(this.captchaId)},n.render=function(){var t=this.state.elementId;return A.createElement("div",{ref:this.ref,id:t})},r}(A.Component);export{Ie as H};
