import{S as it,i as nt,s as ot,e as Ze,a as w,b as l,t as Ee,h as dt,d as o,c as y,f as i,g as v,j as K,k as Ce,l as t,m as ue,n as at,o as r,p as X,q as Q,r as fe,u as ct,v as Ie,w as ke,x as ut,y as ft,z as mt,A as ht,B as pt}from"./svelte.BvUY9TOw.js";import{C as vt,r as bt}from"./loader.BGaOd0T7.js";import{K as $e,k as me}from"./npchandler.Cs5KoD5X.js";import"./react.XJQ4OnvF.js";import"./@supabase.BrxtDNAR.js";import"./@react-three.DzcfnNYH.js";import"./Tabs.astro_astro_type_script_index_0_lang.BYjWCQXm.js";import"./react-dom.3umP1jIU.js";import"./scheduler.CzFDRTuY.js";import"./dexie.FI_cDWIf.js";import"./@nanostores.kqnvP3SD.js";import"./nanostores.Bo9-_MAV.js";import"./axios.dxcvQi4N.js";const{document:Re}=pt;function et(d){let e,s;return{c(){e=l("script"),this.h()},l(a){e=i(a,"SCRIPT",{src:!0});var u=v(e);u.forEach(o),this.h()},h(){at(e.src,s=d[5])||t(e,"src",s),e.async=!0,e.defer=!0},m(a,u){X(a,e,u)},p:ke,d(a){a&&o(e)}}}function tt(d){let e,s='<div class="flex p-4"><div class="shrink-0"><svg class="shrink-0 size-4 text-blue-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></svg></div> <div class="ms-3"><p id="hs-toast-normal-example-label" class="text-sm text-gray-700 dark:text-neutral-400">Processing...</p></div></div>';return{c(){e=l("div"),e.innerHTML=s,this.h()},l(a){e=i(a,"DIV",{class:!0,role:!0,tabindex:!0,"aria-labelledby":!0,"data-svelte-h":!0}),K(e)!=="svelte-xpal3g"&&(e.innerHTML=s),this.h()},h(){t(e,"class","max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-neutral-800 dark:border-neutral-700 z-100"),t(e,"role","alert"),t(e,"tabindex","-1"),t(e,"aria-labelledby","hs-toast-normal-example-label")},m(a,u){X(a,e,u)},d(a){a&&o(e)}}}function st(d){let e,s,a,u='<svg class="shrink-0 size-4 text-red-500 mt-0.5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path></svg>',h,n,p,b=d[4].svelte_internal_message+"",k;return{c(){e=l("div"),s=l("div"),a=l("div"),a.innerHTML=u,h=w(),n=l("div"),p=l("p"),k=Ee(b),this.h()},l(g){e=i(g,"DIV",{class:!0,role:!0,tabindex:!0,"aria-labelledby":!0});var T=v(e);s=i(T,"DIV",{class:!0});var M=v(s);a=i(M,"DIV",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-mnfjrn"&&(a.innerHTML=u),h=y(M),n=i(M,"DIV",{class:!0});var N=v(n);p=i(N,"P",{id:!0,class:!0});var U=v(p);k=Ce(U,b),U.forEach(o),N.forEach(o),M.forEach(o),T.forEach(o),this.h()},h(){t(a,"class","shrink-0"),t(p,"id","hs-toast-error-example-label"),t(p,"class","text-sm text-gray-700 dark:text-neutral-400"),t(n,"class","ms-3"),t(s,"class","flex p-4"),t(e,"class","max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-neutral-800 dark:border-neutral-700 z-100"),t(e,"role","alert"),t(e,"tabindex","-1"),t(e,"aria-labelledby","hs-toast-error-example-label")},m(g,T){X(g,e,T),r(e,s),r(s,a),r(s,h),r(s,n),r(n,p),r(p,k)},p(g,T){T&16&&b!==(b=g[4].svelte_internal_message+"")&&Ie(k,b)},d(g){g&&o(e)}}}function rt(d){let e,s,a=d[4].successful_message+"",u;return{c(){e=l("div"),s=l("span"),u=Ee(a),this.h()},l(h){e=i(h,"DIV",{class:!0});var n=v(e);s=i(n,"SPAN",{class:!0});var p=v(s);u=Ce(p,a),p.forEach(o),n.forEach(o),this.h()},h(){t(s,"class","text-lg text-cyan-600 dark:text-cyan-300"),t(e,"class","flex")},m(h,n){X(h,e,n),r(e,s),r(s,u)},p(h,n){n&16&&a!==(a=h[4].successful_message+"")&&Ie(u,a)},d(h){h&&o(e)}}}function gt(d){let e,s='<span class="relative flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-cyan-500"></span></span> <span class="px-2 text-gray-600 dark:text-neutral-400 font-bold">Online</span>';return{c(){e=l("div"),e.innerHTML=s,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-hfgq2j"&&(e.innerHTML=s),this.h()},h(){t(e,"class","inline-flex items-center")},m(a,u){X(a,e,u)},p:ke,d(a){a&&o(e)}}}function _t(d){let e,s,a='<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>',u,h,n;return{c(){e=l("div"),s=l("span"),s.innerHTML=a,u=w(),h=l("div"),n=Ee(d[3]),this.h()},l(p){e=i(p,"DIV",{class:!0});var b=v(e);s=i(b,"SPAN",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-493u0u"&&(s.innerHTML=a),u=y(b),h=i(b,"DIV",{class:!0});var k=v(h);n=Ce(k,d[3]),k.forEach(o),b.forEach(o),this.h()},h(){t(s,"class","relative flex h-3 w-3"),t(h,"class","px-2 text-gray-600 dark:text-neutral-400 text-wrap w-1/2"),t(e,"class","inline-flex items-center")},m(p,b){X(p,e,b),r(e,s),r(e,u),r(e,h),r(h,n)},p(p,b){b&8&&Ie(n,p[3])},d(p){p&&o(e)}}}function xt(d){let e,s,a,u,h,n,p,b="Sign up",k,g,T="KBVE Authentication Portal",M,N,U,G,z,_,q,R,f="Username",le,Z,E,ie,W,O,he="Email Address",m,S,x,De,$,ee,Be='<label for="register-password" class="mb-1 block text-xs md:text-sm md:mb-2 text-neutral-800 dark:text-neutral-200">Password</label>',Le,ne,A,Te,te,se,He='<label for="confirm-register-password" class="mb-1 block text-xs md:text-sm md:mb-2 text-neutral-800 dark:text-neutral-200">Confirm Password</label>',Ve,oe,P,Me,de,ae,Se,Y,ce=d[2]?"Loading...":"Register",pe,ze,J,re,Ae,F,Ue,Pe,qe,I=d[1]&&!window?.hcaptcha&&et(d),V=d[2]&&tt(),D=d[4].svelte_internal_message&&st(d),L=d[4].successful_message&&rt(d);function je(c,C){return c[3]?_t:gt}let ve=je(d),j=ve(d);return{c(){I&&I.c(),e=Ze(),s=w(),a=l("div"),u=l("div"),h=l("div"),n=l("div"),p=l("h3"),p.textContent=b,k=w(),g=l("h1"),g.textContent=T,M=w(),V&&V.c(),N=w(),D&&D.c(),U=w(),L&&L.c(),G=w(),z=l("form"),_=l("div"),q=l("div"),R=l("label"),R.textContent=f,le=w(),Z=l("div"),E=l("input"),ie=w(),W=l("div"),O=l("label"),O.textContent=he,m=w(),S=l("div"),x=l("input"),De=w(),$=l("div"),ee=l("div"),ee.innerHTML=Be,Le=w(),ne=l("div"),A=l("input"),Te=w(),te=l("div"),se=l("div"),se.innerHTML=He,Ve=w(),oe=l("div"),P=l("input"),Me=w(),de=l("div"),ae=l("div"),Se=w(),Y=l("button"),pe=Ee(ce),ze=w(),J=l("div"),re=l("div"),j.c(),Ae=w(),F=l("dotlottie-player"),this.h()},l(c){const C=dt("svelte-1fvsnp3",Re.head);I&&I.l(C),e=Ze(),C.forEach(o),s=y(c),a=i(c,"DIV",{class:!0});var Ne=v(a);u=i(Ne,"DIV",{class:!0,id:!0});var Oe=v(u);h=i(Oe,"DIV",{class:!0});var be=v(h);n=i(be,"DIV",{class:!0});var B=v(n);p=i(B,"H3",{class:!0,"data-svelte-h":!0}),K(p)!=="svelte-12p1rd1"&&(p.textContent=b),k=y(B),g=i(B,"H1",{class:!0,"data-svelte-h":!0}),K(g)!=="svelte-4x0q1u"&&(g.textContent=T),M=y(B),V&&V.l(B),N=y(B),D&&D.l(B),U=y(B),L&&L.l(B),G=y(B),z=i(B,"FORM",{id:!0,class:!0,action:!0});var Fe=v(z);_=i(Fe,"DIV",{class:!0});var H=v(_);q=i(H,"DIV",{});var ge=v(q);R=i(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(R)!=="svelte-1w0boxg"&&(R.textContent=f),le=y(ge),Z=i(ge,"DIV",{});var Ke=v(Z);E=i(Ke,"INPUT",{type:!0,id:!0,name:!0,autocomplete:!0,class:!0,"aria-describedby":!0}),Ke.forEach(o),ge.forEach(o),ie=y(H),W=i(H,"DIV",{});var _e=v(W);O=i(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(O)!=="svelte-54c5ua"&&(O.textContent=he),m=y(_e),S=i(_e,"DIV",{});var We=v(S);x=i(We,"INPUT",{type:!0,id:!0,name:!0,autocomplete:!0,class:!0,"aria-describedby":!0}),We.forEach(o),_e.forEach(o),De=y(H),$=i(H,"DIV",{});var xe=v($);ee=i(xe,"DIV",{class:!0,"data-svelte-h":!0}),K(ee)!=="svelte-ghqbo6"&&(ee.innerHTML=Be),Le=y(xe),ne=i(xe,"DIV",{});var Ye=v(ne);A=i(Ye,"INPUT",{type:!0,id:!0,name:!0,class:!0,"aria-describedby":!0}),Ye.forEach(o),xe.forEach(o),Te=y(H),te=i(H,"DIV",{});var we=v(te);se=i(we,"DIV",{class:!0,"data-svelte-h":!0}),K(se)!=="svelte-18n8n7b"&&(se.innerHTML=He),Ve=y(we),oe=i(we,"DIV",{});var Ge=v(oe);P=i(Ge,"INPUT",{type:!0,id:!0,name:!0,class:!0,"aria-describedby":!0}),Ge.forEach(o),we.forEach(o),Me=y(H),de=i(H,"DIV",{});var Je=v(de);ae=i(Je,"DIV",{id:!0,class:!0}),v(ae).forEach(o),Je.forEach(o),Se=y(H),Y=i(H,"BUTTON",{type:!0,class:!0});var Qe=v(Y);pe=Ce(Qe,ce),Qe.forEach(o),H.forEach(o),Fe.forEach(o),B.forEach(o),ze=y(be),J=i(be,"DIV",{class:!0});var ye=v(J);re=i(ye,"DIV",{class:!0});var Xe=v(re);j.l(Xe),Xe.forEach(o),Ae=y(ye),F=i(ye,"DOTLOTTIE-PLAYER",{autoplay:!0,loop:!0,class:!0,mode:!0,src:!0});var lt=v(F);lt.forEach(o),ye.forEach(o),be.forEach(o),Oe.forEach(o),Ne.forEach(o),this.h()},h(){t(p,"class","text-blue-400 mb-1"),t(g,"class","page-title text-white font-bold text-3xl mb-5 lg:text-3xl xl:text-4xl 2xl:text-5xl"),t(R,"for","login-username"),t(R,"class","mb-1 block text-xs text-left md:text-sm md:mb-2 text-neutral-800 dark:text-neutral-200"),t(E,"type","text"),t(E,"id","register-username"),t(E,"name","username"),t(E,"autocomplete","username"),t(E,"class","block w-full h-4 md:h-12 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),E.required=!0,t(E,"aria-describedby","register-username"),t(O,"for","register-email"),t(O,"class","mb-1 block text-xs text-left md:text-sm md:mb-2 text-neutral-800 dark:text-neutral-200"),t(x,"type","email"),t(x,"id","register-email"),t(x,"name","email"),t(x,"autocomplete","email"),t(x,"class","block w-full h-4 md:h-12 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),x.required=!0,t(x,"aria-describedby","register-email"),t(ee,"class","flex items-center justify-between"),t(A,"type","password"),t(A,"id","register-password"),t(A,"name","password"),t(A,"class","block w-full h-4 md:h-12 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),A.required=!0,t(A,"aria-describedby","register-password"),t(se,"class","flex items-center justify-between"),t(P,"type","password"),t(P,"id","confirm-register-password"),t(P,"name","password"),t(P,"class","block w-full h-4 md:h-12 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),P.required=!0,t(P,"aria-describedby","confirm-register-password"),t(ae,"id","h-captcha-"+d[6]),t(ae,"class","flex justify-center scale-75 md:scale-100"),t(Y,"type","submit"),t(Y,"class",`${yt} ${kt} ${Et} ${Ct} ${It} ${Dt} ${Lt}`),Y.disabled=d[2],t(_,"class","grid gap-y-2 md:gap-y-4"),t(z,"id","registerForm"),t(z,"class","opacity-0 transition-opacity duration-500"),t(z,"action","#"),t(n,"class","relative"),t(re,"class",""),ue(F,"autoplay",""),ue(F,"loop",""),ue(F,"class","hidden md:block md:w-full"),ue(F,"mode","normal"),at(F.src,Ue="/assets/lottie/"+wt)||ue(F,"src",Ue),t(J,"class","flex flex-col w-1/2"),t(h,"class","px-16 flex flex-row justify-center items-center lg:justify-between"),t(u,"class","py-16 opacity-0 transition-opacity duration-500"),t(u,"id","formulation_form"),t(a,"class","")},m(c,C){I&&I.m(Re.head,null),r(Re.head,e),X(c,s,C),X(c,a,C),r(a,u),r(u,h),r(h,n),r(n,p),r(n,k),r(n,g),r(n,M),V&&V.m(n,null),r(n,N),D&&D.m(n,null),r(n,U),L&&L.m(n,null),r(n,G),r(n,z),r(z,_),r(_,q),r(q,R),r(q,le),r(q,Z),r(Z,E),Q(E,d[4].username),r(_,ie),r(_,W),r(W,O),r(W,m),r(W,S),r(S,x),Q(x,d[4].email),r(_,De),r(_,$),r($,ee),r($,Le),r($,ne),r(ne,A),Q(A,d[4].password),r(_,Te),r(_,te),r(te,se),r(te,Ve),r(te,oe),r(oe,P),Q(P,d[4].confirm),r(_,Me),r(_,de),r(de,ae),r(_,Se),r(_,Y),r(Y,pe),r(h,ze),r(h,J),r(J,re),j.m(re,null),r(J,Ae),r(J,F),Pe||(qe=[fe(E,"input",d[16]),fe(x,"input",d[17]),fe(A,"input",d[18]),fe(P,"input",d[19]),fe(z,"submit",ct(d[0]))],Pe=!0)},p(c,[C]){c[1]&&!window?.hcaptcha?I?I.p(c,C):(I=et(c),I.c(),I.m(e.parentNode,e)):I&&(I.d(1),I=null),c[2]?V||(V=tt(),V.c(),V.m(n,N)):V&&(V.d(1),V=null),c[4].svelte_internal_message?D?D.p(c,C):(D=st(c),D.c(),D.m(n,U)):D&&(D.d(1),D=null),c[4].successful_message?L?L.p(c,C):(L=rt(c),L.c(),L.m(n,G)):L&&(L.d(1),L=null),C&16&&E.value!==c[4].username&&Q(E,c[4].username),C&16&&x.value!==c[4].email&&Q(x,c[4].email),C&16&&A.value!==c[4].password&&Q(A,c[4].password),C&16&&P.value!==c[4].confirm&&Q(P,c[4].confirm),C&4&&ce!==(ce=c[2]?"Loading...":"Register")&&Ie(pe,ce),C&4&&(Y.disabled=c[2]),ve===(ve=je(c))&&j?j.p(c,C):(j.d(1),j=ve(c),j&&(j.c(),j.m(re,null)))},i:ke,o:ke,d(c){c&&(o(s),o(a)),I&&I.d(c),o(e),V&&V.d(),D&&D.d(),L&&L.d(),j.d(),Pe=!1,ut(qe)}}}let wt="/robot.lottie";const yt="inline-flex w-full items-center justify-center gap-x-2 rounded-lg px-4 py-1 text-sm font-normal text-blue-400 focus-visible:ring outline-none transition duration-300 py-3",kt="border border-transparent",Et="bg-blue-100 dark:focus:outline-none",Ct="hover:bg-blue-400 hover:text-white",It="2xl:text-base",Dt="disabled:pointer-events-none disabled:opacity-50 disabled:animate-pulse",Lt="ring-zinc-500 dark:ring-zinc-200";function Tt(d,e,s){const a=ft(),u=()=>{s(2,g=!1),s(4,f.successful_message="",f),b&&k&&T&&hcaptcha.reset(T)},h=m=>{if(b&&k&&T)return hcaptcha.execute(T,m)},n=async()=>{if(s(2,g=!0),M=await me.createActionULID("registerUser"),!M){s(4,f.svelte_internal_message="Failed to create action!",f),u();return}try{const m=await me.registerUser(f.email,f.password,f.confirm,M,f.username,f.captchaToken);if(m){s(4,f.successful_message=`Welcome, ${m.username||m.email}! Registration successful. Redirecting in 2 Seconds`,f),console.log("User registered and profile saved:",m);const S=await me.getSession();S?(console.log("User is already logged in after registration:",S),setTimeout(()=>{window.location.href="/dashboard"},1500)):setTimeout(()=>{window.location.href="/login"},1500);return}await p(M)}catch(m){console.error("Registration failed:",m),await p(M)}finally{s(2,g=!1)}},p=async m=>{const S=await me.getErrorByActionId(m);S?s(4,f.svelte_internal_message=S,f):s(4,f.svelte_internal_message="An unexpected error occurred. Please try again.",f);const x=await me.getDetailedErrorByActionId(m);x?s(3,N=x):s(4,f.svelte_internal_message="An unexpected error occurred. Please try again.",f)};let b=!1,k=!1,g=!1,T,M,N,{hl:U=""}=e,{sitekey:G=$e.get().hcaptcha}=e,{apihost:z=$e.get().hcaptcha_api}=e,{reCaptchaCompat:_=!0}=e,{theme:q=vt.DARK}=e,{size:R="compact"}=e,f={email:"",password:"",confirm:"",username:"",captchaToken:"",svelte_internal_message:"",successful_message:""};const le=new URLSearchParams({recaptchacompat:_?"on":"off",onload:"hcaptchaOnLoad",render:"explicit"}),Z=`${z}?${le.toString()}`,E=Math.floor(Math.random()*100);mt(()=>{bt({elementIdOrName:"skeleton_login_loader",duration:500}),document.getElementById("astro_error_message")&&document.getElementById("astro_error_message");const m=document.getElementById("formulation_form");m&&setTimeout(()=>{m.classList.replace("opacity-0","opacity-100")},200);const S=document.getElementById("registerForm");S&&setTimeout(()=>{S.classList.replace("opacity-0","opacity-100")},500),window.hcaptchaOnLoad=()=>{a("load"),s(15,k=!0)},window.onSuccess=x=>{a("success",{token:x}),s(4,f.captchaToken=x,f)},window.onError=()=>{a("error")},window.onClose=()=>{a("close")},window.onExpired=()=>{a("expired"),u()},a("mount"),s(1,b=!0)}),ht(()=>{window.hcaptchaOnLoad=null,window.onSuccess=null,k&&(hcaptcha=null)});function ie(){f.username=this.value,s(4,f)}function W(){f.email=this.value,s(4,f)}function O(){f.password=this.value,s(4,f)}function he(){f.confirm=this.value,s(4,f)}return d.$$set=m=>{"hl"in m&&s(9,U=m.hl),"sitekey"in m&&s(10,G=m.sitekey),"apihost"in m&&s(11,z=m.apihost),"reCaptchaCompat"in m&&s(12,_=m.reCaptchaCompat),"theme"in m&&s(13,q=m.theme),"size"in m&&s(14,R=m.size)},d.$$.update=()=>{d.$$.dirty&58882&&b&&k&&(T=hcaptcha.render(`h-captcha-${E}`,{sitekey:G,hl:U,theme:q,callback:"onSuccess","error-callback":"onError","close-callback":"onClose","expired-callback":"onExpired",size:R}))},[n,b,g,N,f,Z,E,u,h,U,G,z,_,q,R,k,ie,W,O,he]}class Ot extends it{constructor(e){super(),nt(this,e,Tt,xt,ot,{reset:7,execute:8,handleRegister:0,hl:9,sitekey:10,apihost:11,reCaptchaCompat:12,theme:13,size:14})}get reset(){return this.$$.ctx[7]}get execute(){return this.$$.ctx[8]}get handleRegister(){return this.$$.ctx[0]}}export{Ot as default};
