import{S as he,i as me,s as ge,a as T,e as p,t as M,b as D,c as h,f as v,j as Y,d as m,g as V,k as u,n as J,m as l,y as G,o as te,z as be,p as K,q as ue,u as ve,v as ye,A as _e,w as ke,D as C,C as W}from"./index.D49SYJia.js";import{f as pe,l as re,k as we}from"./khashvault.CrgWuqfC.js";import"./index.CgBe15gE.js";import"./index.BH1EYZ08.js";const Ee="auth/login",xe="graceful/profile";async function Se(i){return new Promise(t=>setTimeout(t,i))}class j{constructor(t,e,r){this.status=t,this.error=t<200||t>=300,this.message=e,this.data=r}display(){console.log(`Status: ${this.status}, Message: ${this.message}, Error: ${this.error}, Data: ${JSON.stringify(this.data)}`)}scope(){try{return JSON.stringify(this.data)}catch(t){return console.error("Parsing error:",t),"Error: Unable to parse data"}}extractField(t){if(this.data&&typeof this.data=="object"&&t in this.data)return this.data[t];try{if(typeof this.message=="string"){const e=JSON.parse(this.message);if(e&&typeof e=="object"&&t in e)return e[t]}}catch(e){console.error("Parsing error when checking message:",e)}return null}extractError(){if(typeof this.message=="string")try{const t=JSON.parse(this.message);if(t&&typeof t=="object"&&"error"in t)return t.error}catch(t){console.error("Parsing error:",t)}return"Error: Unable to parse error message"}token(){if(typeof this.message=="string")try{const t=JSON.parse(this.message);if(t&&typeof t=="object"&&"token"in t)return t.token}catch(t){console.error("Parsing error:",t)}return"Error: Unable to parse token"}async serialize(){try{return JSON.stringify({status:this.status,error:this.error,message:this.message,data:this.data})}catch(t){return console.error("Serialization error:",t),JSON.stringify({status:500,error:!0,message:"Internal Server Error: Unable to serialize response",data:{}})}}static async deserialize(t){try{const e=JSON.parse(t);return new j(e.status,e.message,e.data)}catch(e){return console.error("Deserialization error:",e),new j(500,"Internal Server Error: Unable to deserialize response",{})}}}async function Ie(i,t,e){try{const r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(t),credentials:"include"}),c=await r.json(),n=!r.ok;let o=r.ok?"Success":"Error";typeof c.message=="object"&&c.message!==null&&(o=JSON.stringify(c.message));const s=n&&c.error?{error:c.error}:c;return new j(r.status,o,s)}catch(r){return console.error("Request failed:",r),new j(500,"Internal Server Error: Request failed",{})}}async function Te(i,t,e){try{const r=new URLSearchParams(t).toString(),c=`${i}?${r}`,n=await fetch(c,{method:"GET",headers:{...e},credentials:"include"}),o=await n.json(),s=o.message||(n.ok?"Success":"Error"),a=o.data||o;return new j(n.status,s,a)}catch(r){return console.error("Request failed:",r),new j(500,"Internal Server Error: Request failed",{})}}async function De(i,t,e){const r=`${i}${pe}${Ee}`;return Ie(r,{email:t,password:e},{"x-kbve-shieldwall":"auth-login"})}async function Ce(i,t){const e=`${i}${pe}${xe}`,r={Authorization:`Bearer ${t}`,"x-kbve-shieldwall":"auth-profile"};return Te(e,{},r)}function ce(i){let t,e,r,c,n,o,s=i[6].username+"",a,x;return{c(){t=p("div"),e=p("a"),r=p("button"),c=p("span"),n=T(),o=p("span"),a=M(s),x=M(" Enter The Dashboard"),this.h()},l(f){t=h(f,"DIV",{class:!0});var _=v(t);e=h(_,"A",{href:!0});var g=v(e);r=h(g,"BUTTON",{class:!0});var P=v(r);c=h(P,"SPAN",{class:!0}),v(c).forEach(m),n=D(P),o=h(P,"SPAN",{class:!0});var S=v(o);a=V(S,s),x=V(S," Enter The Dashboard"),S.forEach(m),P.forEach(m),g.forEach(m),_.forEach(m),this.h()},h(){u(c,"class","absolute right-0 w-8 h-32 -mt-12 transition-all duration-1000 transform translate-x-12 bg-white opacity-10 rotate-12 group-hover:-translate-x-40 ease"),u(o,"class","relative"),u(r,"class","relative rounded px-5 py-2.5 overflow-hidden group bg-cyan-500 relative hover:bg-gradient-to-r hover:from-cyan-500 hover:to-cyan-400 text-white hover:ring-2 hover:ring-offset-2 hover:ring-cyan-400 transition-all ease-out duration-300"),u(e,"href","/dashboard/"),u(t,"class","object-contain")},m(f,_){J(f,t,_),l(t,e),l(e,r),l(r,c),l(r,n),l(r,o),l(o,a),l(o,x)},p(f,_){_&64&&s!==(s=f[6].username+"")&&K(a,s)},d(f){f&&m(t)}}}function de(i){let t,e,r,c,n,o;return{c(){t=p("div"),e=p("dotlottie-player"),c=T(),n=p("span"),o=M(i[4]),this.h()},l(s){t=h(s,"DIV",{class:!0});var a=v(t);e=h(a,"DOTLOTTIE-PLAYER",{autoplay:!0,loop:!0,class:!0,mode:!0,src:!0});var x=v(e);x.forEach(m),c=D(a),n=h(a,"SPAN",{class:!0});var f=v(n);o=V(f,i[4]),f.forEach(m),a.forEach(m),this.h()},h(){C(e,"autoplay",""),C(e,"loop",""),C(e,"class","w-24"),C(e,"mode","normal"),W(e.src,r="/assets/lottie/"+i[1])||C(e,"src",r),u(n,"class","text-lg text-red-600 dark:text-red-300"),u(t,"class","flex")},m(s,a){J(s,t,a),l(t,e),l(t,c),l(t,n),l(n,o)},p(s,a){a&2&&!W(e.src,r="/assets/lottie/"+s[1])&&C(e,"src",r),a&16&&K(o,s[4])},d(s){s&&m(t)}}}function fe(i){let t,e,r,c,n,o;return{c(){t=p("div"),e=p("dotlottie-player"),c=T(),n=p("span"),o=M(i[5]),this.h()},l(s){t=h(s,"DIV",{class:!0});var a=v(t);e=h(a,"DOTLOTTIE-PLAYER",{autoplay:!0,loop:!0,class:!0,mode:!0,src:!0});var x=v(e);x.forEach(m),c=D(a),n=h(a,"SPAN",{class:!0});var f=v(n);o=V(f,i[5]),f.forEach(m),a.forEach(m),this.h()},h(){C(e,"autoplay",""),C(e,"loop",""),C(e,"class","w-24"),C(e,"mode","normal"),W(e.src,r="/assets/lottie/"+i[1])||C(e,"src",r),u(n,"class","text-lg text-cyan-600 dark:text-cyan-300"),u(t,"class","flex")},m(s,a){J(s,t,a),l(t,e),l(t,c),l(t,n),l(n,o)},p(s,a){a&2&&!W(e.src,r="/assets/lottie/"+s[1])&&C(e,"src",r),a&32&&K(o,s[5])},d(s){s&&m(t)}}}function Pe(i){let t,e,r,c,n,o,s,a,x="Email Address",f,_,g,P,S,b,O='<label for="login-password" class="mb-2 block text-sm text-neutral-800 dark:text-neutral-200">Password</label> <a href="/recovery/" target="_blank"><span class="rounded-lg text-sm font-medium text-cyan-400 decoration-2 outline-none ring-zinc-500 hover:underline focus-visible:ring dark:text-cyan-400 dark:ring-zinc-200 dark:focus:outline-none dark:focus:ring-1">Forgot password?</span></a>',Q,L,I,X,A,se='<svg class="h-5 w-5 text-red-500" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"></path></svg>',Z,N,ae="8+ characters required",$,z,F=i[0]?"Loading...":"Sign In",B,ee,oe,k=i[6].username&&ce(i),w=i[4]&&de(i),E=i[5]&&fe(i);return{c(){k&&k.c(),t=T(),e=p("div"),w&&w.c(),r=T(),E&&E.c(),c=T(),n=p("form"),o=p("div"),s=p("div"),a=p("label"),a.textContent=x,f=T(),_=p("div"),g=p("input"),P=T(),S=p("div"),b=p("div"),b.innerHTML=O,Q=T(),L=p("div"),I=p("input"),X=T(),A=p("div"),A.innerHTML=se,Z=T(),N=p("p"),N.textContent=ae,$=T(),z=p("button"),B=M(F),this.h()},l(d){k&&k.l(d),t=D(d),e=h(d,"DIV",{class:!0});var y=v(e);w&&w.l(y),r=D(y),E&&E.l(y),c=D(y),n=h(y,"FORM",{id:!0,action:!0});var ne=v(n);o=h(ne,"DIV",{class:!0});var U=v(o);s=h(U,"DIV",{});var R=v(s);a=h(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-nmg0hr"&&(a.textContent=x),f=D(R),_=h(R,"DIV",{class:!0});var le=v(_);g=h(le,"INPUT",{type:!0,id:!0,name:!0,autocomplete:!0,class:!0,"aria-describedby":!0}),le.forEach(m),R.forEach(m),P=D(U),S=h(U,"DIV",{});var q=v(S);b=h(q,"DIV",{class:!0,"data-svelte-h":!0}),Y(b)!=="svelte-1vmgkzx"&&(b.innerHTML=O),Q=D(q),L=h(q,"DIV",{class:!0});var H=v(L);I=h(H,"INPUT",{type:!0,id:!0,name:!0,class:!0,"aria-describedby":!0}),X=D(H),A=h(H,"DIV",{class:!0,"data-svelte-h":!0}),Y(A)!=="svelte-140u1f9"&&(A.innerHTML=se),H.forEach(m),Z=D(q),N=h(q,"P",{class:!0,id:!0,"data-svelte-h":!0}),Y(N)!=="svelte-1bl4lnh"&&(N.textContent=ae),q.forEach(m),$=D(U),z=h(U,"BUTTON",{type:!0,class:!0});var ie=v(z);B=V(ie,F),ie.forEach(m),U.forEach(m),ne.forEach(m),y.forEach(m),this.h()},h(){u(a,"for","login-email"),u(a,"class","mb-2 block text-sm text-neutral-800 dark:text-neutral-200"),u(g,"type","email"),u(g,"id","login-email"),u(g,"name","email"),u(g,"autocomplete","email"),u(g,"class","block w-full rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),g.required=!0,u(g,"aria-describedby","login-email"),u(_,"class","relative"),u(b,"class","flex items-center justify-between"),u(I,"type","password"),u(I,"id","login-password"),u(I,"name","password"),u(I,"class","block w-full rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 focus:border-neutral-200 focus:outline-none focus:ring focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:focus:ring-1"),I.required=!0,u(I,"aria-describedby","login-password"),u(A,"class","pointer-events-none absolute inset-y-0 end-0 hidden pe-3"),u(L,"class","relative"),u(N,"class","mt-2 hidden text-xs text-red-600"),u(N,"id","login-password-error"),u(z,"type","submit"),u(z,"class",`${Oe} ${ze} ${Le} ${Ne} ${Ae} ${je} ${Ue} mt-3`),z.disabled=i[0],u(o,"class","grid gap-y-4"),u(n,"id","loginForm"),u(n,"action","#"),u(e,"class","mt-5")},m(d,y){k&&k.m(d,y),J(d,t,y),J(d,e,y),w&&w.m(e,null),l(e,r),E&&E.m(e,null),l(e,c),l(e,n),l(n,o),l(o,s),l(s,a),l(s,f),l(s,_),l(_,g),G(g,i[2]),l(o,P),l(o,S),l(S,b),l(S,Q),l(S,L),l(L,I),G(I,i[3]),l(L,X),l(L,A),l(S,Z),l(S,N),l(o,$),l(o,z),l(z,B),ee||(oe=[te(g,"input",i[9]),te(I,"input",i[10]),te(n,"submit",be(i[7]))],ee=!0)},p(d,[y]){d[6].username?k?k.p(d,y):(k=ce(d),k.c(),k.m(t.parentNode,t)):k&&(k.d(1),k=null),d[4]?w?w.p(d,y):(w=de(d),w.c(),w.m(e,r)):w&&(w.d(1),w=null),d[5]?E?E.p(d,y):(E=fe(d),E.c(),E.m(e,c)):E&&(E.d(1),E=null),y&4&&g.value!==d[2]&&G(g,d[2]),y&8&&I.value!==d[3]&&G(I,d[3]),y&1&&F!==(F=d[0]?"Loading...":"Sign In")&&K(B,F),y&1&&(z.disabled=d[0])},i:ue,o:ue,d(d){d&&(m(t),m(e)),k&&k.d(d),w&&w.d(),E&&E.d(),ee=!1,ve(oe)}}}const Oe="inline-flex w-full items-center justify-center gap-x-2 rounded-lg px-4 py-1 text-sm font-normal text-blue-400 focus-visible:ring outline-none transition duration-300  py-3",ze="border border-transparent",Le="bg-blue-100 dark:focus:outline-none",Ne="hover:bg-blue-400 hover:text-white",Ae="2xl:text-base",je="disabled:pointer-events-none disabled:opacity-50",Ue="ring-zinc-500 dark:ring-zinc-200";function qe(i,t,e){let r;ye(i,we,b=>e(6,r=b));const c=_e(),n=()=>{e(0,o=!1),e(5,_="")};let o=!1,s="",a="",x="",f="",_="";ke(()=>{const b=document.getElementById("skeleton_login_loader");document.getElementById("astro_error_message")&&document.getElementById("astro_error_message"),b&&(b.classList.add("opacity-0","transition-opacity","duration-500"),setTimeout(()=>{b.style.display="none"},500)),c("mount")});const g=async()=>{e(0,o=!0),e(4,f="");const b=await De("https://rust.kbve.com",a,x);if(b.error){switch(b.extractError()){case"invalid_password":e(4,f="Invalid Password"),e(1,s="pray.lottie");break;case"auth_error":e(4,f="Invalid Auth Method"),e(1,s="monkeymeme.lottie");break;default:e(4,f=b.extractError())}n()}else{b.display(),e(4,f=""),e(1,s="holydance.lottie"),e(5,_="Yay! SucklessFully Dance, while I get dat profile!"),await Se(500);const O=await Ce("https://rust.kbve.com",b.token());if(O.error)switch(O.extractError()){default:e(4,f=O.extractError()),n()}else re("username",O.extractField("username")),re("email",O.extractField("email")),re("uuid",O.extractField("userid")),location.href="/dashboard"}};function P(){a=this.value,e(2,a)}function S(){x=this.value,e(3,x)}return[o,s,a,x,f,_,r,g,n,P,S]}class Be extends he{constructor(t){super(),me(this,t,qe,Pe,ge,{reset:8})}get reset(){return this.$$.ctx[8]}}export{Be as default};
