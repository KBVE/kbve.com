import{S as B,i as N,s as R,e as _,a as L,t as E,A as Y,b as v,g as j,f as o,c as C,d as V,h as A,y as q,j as b,l as p,k as w,n as x,q as D,r as z,w as H,B as U}from"./index.DZiq8zhp.js";function $(u){let n,P="",y,m,s,i,l,d,T,h,r,g,k,c,I,S;return{c(){n=_("script"),n.innerHTML=P,m=L(),s=_("div"),i=_("label"),l=_("input"),d=E(`
    Play Tracks`),T=L(),h=_("label"),r=_("input"),g=E(`
    Play Sets`),k=L(),c=_("div"),this.h()},l(t){const e=Y("svelte-oib6m2",document.head);n=v(e,"SCRIPT",{src:!0,"data-svelte-h":!0}),j(n)!=="svelte-k1zhov"&&(n.innerHTML=P),e.forEach(o),m=C(t),s=v(t,"DIV",{});var a=V(s);i=v(a,"LABEL",{});var f=V(i);l=v(f,"INPUT",{type:!0}),d=A(f,`
    Play Tracks`),f.forEach(o),T=C(a),h=v(a,"LABEL",{});var M=V(h);r=v(M,"INPUT",{type:!0}),g=A(M,`
    Play Sets`),M.forEach(o),a.forEach(o),k=C(t),c=v(t,"DIV",{id:!0,class:!0}),V(c).forEach(o),this.h()},h(){q(n.src,y="https://www.youtube.com/iframe_api")||b(n,"src",y),n.async=!0,b(l,"type","checkbox"),b(r,"type","checkbox"),b(c,"id","player"),b(c,"class","w-full aspect-video")},m(t,e){p(document.head,n),w(t,m,e),w(t,s,e),p(s,i),p(i,l),l.checked=u[0],p(i,d),p(s,T),p(s,h),p(h,r),r.checked=u[1],p(h,g),w(t,k,e),w(t,c,e),I||(S=[x(l,"change",u[2]),x(r,"change",u[3])],I=!0)},p(t,[e]){e&1&&(l.checked=t[0]),e&2&&(r.checked=t[1])},i:D,o:D,d(t){t&&(o(m),o(s),o(k),o(c)),o(n),I=!1,z(S)}}}function G(u){u.target.playVideo()}function F(u,n,P){let y,m=[],s=[],i,l=!0,d=!1;async function T(){const a=await(await fetch("/api/music.json")).json();m=a.items.flatMap(f=>f.ytTracks),s=a.items.flatMap(f=>f.ytSets),h()}function h(){const e=r(),a=e[Math.floor(Math.random()*e.length)];window.onYouTubeIframeAPIReady=function(){y=g("player",a)}}function r(){return[...l?m:[],...d?s:[]]}H(()=>{T()});function g(e,a){return new YT.Player(e,{height:"500",width:"100%",videoId:a,playerVars:{autoplay:1,controls:1,volume:100},events:{onReady:G,onStateChange:k}})}function k(e){e.data===YT.PlayerState.PLAYING&&!i&&(i=setInterval(c,1e3))}function c(){let e=y.getDuration(),a=y.getCurrentTime();e-a<=1&&I()}function I(){const e=r();if(e.length===0)return;const a=e[Math.floor(Math.random()*e.length)];y.loadVideoById(a)}U(()=>{i&&clearInterval(i)});function S(){l=this.checked,P(0,l)}function t(){d=this.checked,P(1,d)}return[l,d,S,t]}class K extends B{constructor(n){super(),N(this,n,F,$,R,{})}}export{K as default};
