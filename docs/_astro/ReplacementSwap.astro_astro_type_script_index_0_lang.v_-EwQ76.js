import{T as R,s as b,a as C}from"./ClientRouter.astro_astro_type_script_index_0_lang.kk6-sEUM.js";const _="vtbot-replace-swap",$=()=>(document.querySelector(`meta[name="${_}"]`)?.getAttribute("content")??"").split(",").map(e=>e.trim());document.addEventListener(R,e=>{const t=e.swap;e.swap=()=>{const r=o=>{const p=o.body.querySelectorAll("[data-vtbot-replace]"),f=[...p].map(d=>d instanceof HTMLElement&&d.dataset.vtbotReplace);return{elements:[...p],names:new Set(f)}},{elements:n,names:a}=r(document),{elements:l,names:c}=r(e.newDocument),s=[...a].filter(o=>c.has(o));if(s.length===0){t();return}const i=e.newDocument;b.deselectScripts(i);const m=$().map(o=>({key:o,val:document.documentElement.getAttribute(o)}));b.swapRootAttributes(i),m.forEach(o=>o.val!==null&&document.documentElement.setAttribute(o.key,o.val)),b.swapHeadElements(i);const S=b.saveFocus();s.forEach(o=>{const p=n.find(d=>d.dataset.vtbotReplace===o),f=l.find(d=>d.dataset.vtbotReplace===o);p&&f&&b.swapBodyElement(f,p)}),S(),[...document.querySelectorAll("[class*='astro-route-announcer']")].forEach(o=>o.remove())}});const v="div.main-frame",I=`${v} main`,k="data-mobile-menu-expanded",L="starlight-menu-button",E="nav.sidebar",u=`${E} .sidebar-content`,g="starlight-lang-select";function O(e){const t=c(e.href),r=t.split(""),n=document.querySelectorAll(`${u} a[href^='/']`);if(n.length===0)return null;const a=[...n],l=a.map(s=>c(new URL(s.href,location.href).href));return a[l.map(s=>s.split("").findIndex((i,m)=>i!==r[m])).map((s,i)=>s!==-1?s:Math.min(t.length,l[i].length)+(t.length===l[i].length?1:0)).reduce((s,i,m,S)=>i>S[s]?m:s,0)];function c(s){return s.replace(/\/#/,"#").replace(/\/$/,"")}}function P(){document.querySelectorAll(`${u} [aria-current="page"]`)?.forEach(e=>e.removeAttribute("aria-current"))}function D(e){P(),O(e)?.setAttribute("aria-current","page")}function T(e,t=!0){const r=document.querySelector(`${u} [aria-current="page"]`);let n=r?.closest("details");for(;n;)n.open=!0,n=n.parentElement?.closest("details");t&&r?.scrollIntoView({block:"center",behavior:"instant"})}function w(e){e.querySelectorAll(u+" .__collapse input").forEach((t,r)=>t.setAttribute("data-vtbot-replace",`vtbot-sms-v0-${r}`)),e.querySelectorAll(u+" :is(starlight-multi-sidebar-tabs, starlight-multi-sidebar-select)").forEach((t,r)=>{t.setAttribute("data-vtbot-replace",`vtbot-sms-${r}`),[...t.children].forEach((n,a)=>{a>0&&[...n.children].forEach((l,c)=>l.setAttribute("data-astro-transition-persist",`vtbot-sms-${r}-${a}-${c}`))})})}const B="vtbot-starlight-replace-sidebar-content",F="vtbot-starlight-retain-current-page-marker",N=()=>({replaceSidebarContent:document.querySelector(`head meta[name="${B}"]`),retainCurrentPageMarker:document.querySelector(`head meta[name="${F}"]`),mainTransitionScope:document.querySelector('head meta[name="vtbot-main-transition-scope"]')?.content});let{replaceSidebarContent:h,retainCurrentPageMarker:y,mainTransitionScope:A}=N();T();M(window.document);function K(e){q(document),q(e.newDocument),j(),M(e.newDocument),z(e),!h&&!y&&D(e.to)}function U(e){H(e.newDocument)}function G(e){!y&&T()}function j(){document.body.hasAttribute(k)&&document.body.querySelector(L)?.closest("nav")?.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape",code:"Escape",charCode:27,keyCode:27,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1}))}function q(e){e.body.querySelector(v)?.setAttribute("data-vtbot-replace","main")}function z(e){if(!A)return;t(document,A),t(e.newDocument,A);function t(r,n){const a=r.querySelector(I);a&&(a.dataset.astroTransitionScope=n)}}function H(e){const t=e.querySelector(E);if(!t)document.querySelector(E)?.remove();else{const r=document.querySelector(E);if(!r)document.querySelector(v)?.insertAdjacentElement("beforebegin",t);else{const n=r.querySelector(u),a=t.querySelector(u),l=[...n?.querySelectorAll("a")??[]].map(c=>c.href).join(" ")!==[...a?.querySelectorAll("a")??[]].map(c=>c.href).join(" ");h||l?(n&&a?(n.setAttribute("data-vtbot-replace","vtbot-sidebar-content"),a.setAttribute("data-vtbot-replace","vtbot-sidebar-content"),r.removeAttribute("data-vtbot-replace"),t.removeAttribute("data-vtbot-replace")):(r.setAttribute("data-vtbot-replace","vtbot-sidebar-content"),t.setAttribute("data-vtbot-replace","vtbot-sidebar-content"),n?.removeAttribute("data-vtbot-replace"),a?.removeAttribute("data-vtbot-replace")),[...e.scripts].filter(c=>(c.textContent??"").includes("sl-sidebar-state-persist")).forEach(c=>c.setAttribute("data-astro-rerun",""))):(w(document),w(e))}}}function M(e){e.querySelectorAll(g).forEach((t,r)=>t.setAttribute("data-vtbot-replace",`vtbot-${g}-${r}`))}document.addEventListener(C,e=>{({replaceSidebarContent:h,retainCurrentPageMarker:y,mainTransitionScope:A}=N());const t=e.loader;e.loader=async()=>{await t(),K(e)}});document.addEventListener(R,e=>{U(e);const t=e.swap;e.swap=()=>{t(),G()}});export{B as R,F as a};
