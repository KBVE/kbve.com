import{r as i,j as e}from"./react.CvslfkeK.js";import{u as c}from"./@nanostores.vmeSb_hF.js";import{c as h}from"./clsx.B-dksMZM.js";import{u as N,a as w,b as z}from"./userstate.P8giVhEZ.js";import{B as k,q as C,D as S,r as M,U as _,c as I,h as U,s as A}from"./lucide-react.Cq0BVVq0.js";import"./@react-three.B-wTPXHf.js";import"./nanostores.Bo9-_MAV.js";import"./supabaseClient.xweZyGB4.js";import"./@supabase.B1FuS6Fv.js";import"./Page.astro_astro_type_script_index_0_lang.DoJZq5Ub.js";import"./react-dom.DDrfKqI3.js";import"./svelte.BEh2_tzM.js";import"./esm-env.rsSWfq8L.js";const H=({className:x})=>{const t=c(N),o=c(w);c(z);const[n,l]=i.useState(!1),[p,d]=i.useState(!0),[b,g]=i.useState(!1),a=i.useMemo(()=>!t||!o,[t,o]);i.useEffect(()=>{const s=()=>{const r=document.querySelector('[data-skeleton="avatar"]');r&&(r.style.transition="opacity 0.5s ease-out",r.style.opacity="0",r.style.pointerEvents="none",r.style.zIndex="-1",r.style.visibility="hidden"),setTimeout(()=>g(!0),100)};(async()=>{try{await new Promise(r=>setTimeout(r,800)),s(),d(!1)}catch(r){console.error("Error initializing MiniNav:",r),s(),d(!1)}})()},[t,o,a]);const u=i.useMemo(()=>a?"Guest User":t?.user_metadata?.full_name?t.user_metadata.full_name:t?.email?t.email.split("@")[0]:"User",[t,a]),m=i.useMemo(()=>a||!t?null:t?.user_metadata?.avatar_url||t?.user_metadata?.picture||null,[t,a]),v=i.useMemo(()=>a?"G":(t?.user_metadata?.full_name||t?.email||"User").split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2),[t,a]),j=[{icon:k,label:"Analytics",href:"/dashboard/analytics"},{icon:C,label:"Performance",href:"/dashboard/performance"},{icon:S,label:"Downloads",href:"/dashboard/downloads"},{icon:M,label:"Share",href:"/dashboard/share"}],y=[{icon:_,label:"Profile",href:"/profile"},{icon:I,label:"Settings",href:"/settings"},{icon:U,label:"Notifications",href:"/notifications"},{icon:A,label:"Sign Out",href:"/logout",divider:!0}];return p?null:e.jsxs("div",{className:h("flex items-center space-x-4 transition-opacity duration-500",b?"opacity-100":"opacity-0",x),style:{position:"absolute",top:0,left:0,right:0,height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0"},children:[e.jsx("nav",{className:"hidden md:flex items-center space-x-3 mr-4",children:j.map(s=>e.jsxs("a",{href:s.href,className:"flex items-center px-3 py-2 text-sm text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-all duration-200",title:s.label,children:[e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2 hidden lg:block",children:s.label})]},s.label))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!n),className:"flex items-center space-x-4 px-4 py-3 rounded-lg hover:bg-zinc-800 transition-all duration-200",children:[e.jsxs("div",{className:"relative w-12 h-12",children:[m?e.jsx("img",{src:m,alt:u,className:"w-full h-full rounded-full object-cover border-2 border-zinc-700 hover:border-cyan-500 transition-colors duration-200"}):e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-semibold text-sm border-2 border-zinc-700 hover:border-cyan-500 transition-colors duration-200",children:v}),!a&&e.jsx("span",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full bg-green-500 border-2 border-zinc-900"})]}),e.jsxs("div",{className:"hidden sm:flex flex-col justify-center text-left leading-tight",children:[e.jsx("span",{className:"text-sm font-semibold text-white truncate",children:u}),e.jsx("span",{className:"text-xs text-zinc-400 truncate",children:a?"Guest Account":t?.email||"Member"})]}),e.jsx("svg",{className:h("w-4 h-4 text-zinc-400 transition-transform duration-200",n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&e.jsx("div",{className:"fixed top-16 right-4 w-48 bg-zinc-800 rounded-lg shadow-lg border border-zinc-700 py-1 z-[9999]",children:y.map(s=>e.jsxs("div",{children:[s.divider&&e.jsx("hr",{className:"border-zinc-700 my-1"}),e.jsxs("a",{href:s.href,className:"flex items-center px-4 py-2 text-sm text-zinc-300 hover:text-white hover:bg-zinc-700 transition-colors duration-200",onClick:()=>l(!1),children:[e.jsx(s.icon,{className:"w-4 h-4 mr-3"}),s.label]})]},s.label))})]}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})};export{H as default};
