import{r as L}from"./domelementtype.C_FFwB5S.js";var b={},o={},_;function A(){if(_)return o;_=1;var f=o&&o.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(a[p]=s[p])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=o&&o.__assign||function(){return y=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},y.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.cloneNode=o.hasChildren=o.isDocument=o.isDirective=o.isComment=o.isText=o.isCDATA=o.isTag=o.Element=o.Document=o.CDATA=o.NodeWithChildren=o.ProcessingInstruction=o.Comment=o.Text=o.DataNode=o.Node=void 0;var c=L(),v=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),N(this,t)},e}();o.Node=v;var d=function(e){f(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(v);o.DataNode=d;var g=function(e){f(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(d);o.Text=g;var x=function(e){f(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(d);o.Comment=x;var l=function(e){f(t,e);function t(n,a){var s=e.call(this,a)||this;return s.name=n,s.type=c.ElementType.Directive,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(d);o.ProcessingInstruction=l;var r=function(e){f(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(v);o.NodeWithChildren=r;var i=function(e){f(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(r);o.CDATA=i;var u=function(e){f(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(r);o.Document=u;var h=function(e){f(t,e);function t(n,a,s,p){s===void 0&&(s=[]),p===void 0&&(p=n==="script"?c.ElementType.Script:n==="style"?c.ElementType.Style:c.ElementType.Tag);var m=e.call(this,s)||this;return m.name=n,m.attribs=a,m.type=p,m}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var s,p;return{name:a,value:n.attribs[a],namespace:(s=n["x-attribsNamespace"])===null||s===void 0?void 0:s[a],prefix:(p=n["x-attribsPrefix"])===null||p===void 0?void 0:p[a]}})},enumerable:!1,configurable:!0}),t}(r);o.Element=h;function D(e){return(0,c.isTag)(e)}o.isTag=D;function P(e){return e.type===c.ElementType.CDATA}o.isCDATA=P;function w(e){return e.type===c.ElementType.Text}o.isText=w;function j(e){return e.type===c.ElementType.Comment}o.isComment=j;function E(e){return e.type===c.ElementType.Directive}o.isDirective=E;function I(e){return e.type===c.ElementType.Root}o.isDocument=I;function q(e){return Object.prototype.hasOwnProperty.call(e,"children")}o.hasChildren=q;function N(e,t){t===void 0&&(t=!1);var n;if(w(e))n=new g(e.data);else if(j(e))n=new x(e.data);else if(D(e)){var a=t?C(e.children):[],s=new h(e.name,y({},e.attribs),a);a.forEach(function(M){return M.parent=s}),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=y({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=y({},e["x-attribsPrefix"])),n=s}else if(P(e)){var a=t?C(e.children):[],p=new i(a);a.forEach(function(O){return O.parent=p}),n=p}else if(I(e)){var a=t?C(e.children):[],m=new u(a);a.forEach(function(O){return O.parent=m}),e["x-mode"]&&(m["x-mode"]=e["x-mode"]),n=m}else if(E(e)){var T=new l(e.name,e.data);e["x-name"]!=null&&(T["x-name"]=e["x-name"],T["x-publicId"]=e["x-publicId"],T["x-systemId"]=e["x-systemId"]),n=T}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}o.cloneNode=N;function C(e){for(var t=e.map(function(a){return N(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}return o}var S;function R(){return S||(S=1,function(f){var y=b&&b.__createBinding||(Object.create?function(l,r,i,u){u===void 0&&(u=i);var h=Object.getOwnPropertyDescriptor(r,i);(!h||("get"in h?!r.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(l,u,h)}:function(l,r,i,u){u===void 0&&(u=i),l[u]=r[i]}),c=b&&b.__exportStar||function(l,r){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&y(r,l,i)};Object.defineProperty(f,"__esModule",{value:!0}),f.DomHandler=void 0;var v=L(),d=A();c(A(),f);var g={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},x=function(){function l(r,i,u){this.dom=[],this.root=new d.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof i=="function"&&(u=i,i=g),typeof r=="object"&&(i=r,r=void 0),this.callback=r??null,this.options=i??g,this.elementCB=u??null}return l.prototype.onparserinit=function(r){this.parser=r},l.prototype.onreset=function(){this.dom=[],this.root=new d.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(r){this.handleCallback(r)},l.prototype.onclosetag=function(){this.lastNode=null;var r=this.tagStack.pop();this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(r)},l.prototype.onopentag=function(r,i){var u=this.options.xmlMode?v.ElementType.Tag:void 0,h=new d.Element(r,i,void 0,u);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(r){var i=this.lastNode;if(i&&i.type===v.ElementType.Text)i.data+=r,this.options.withEndIndices&&(i.endIndex=this.parser.endIndex);else{var u=new d.Text(r);this.addNode(u),this.lastNode=u}},l.prototype.oncomment=function(r){if(this.lastNode&&this.lastNode.type===v.ElementType.Comment){this.lastNode.data+=r;return}var i=new d.Comment(r);this.addNode(i),this.lastNode=i},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var r=new d.Text(""),i=new d.CDATA([r]);this.addNode(i),r.parent=i,this.lastNode=r},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(r,i){var u=new d.ProcessingInstruction(r,i);this.addNode(u)},l.prototype.handleCallback=function(r){if(typeof this.callback=="function")this.callback(r,this.dom);else if(r)throw r},l.prototype.addNode=function(r){var i=this.tagStack[this.tagStack.length-1],u=i.children[i.children.length-1];this.options.withStartIndices&&(r.startIndex=this.parser.startIndex),this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),i.children.push(r),u&&(r.prev=u,u.next=r),r.parent=i,this.lastNode=null},l}();f.DomHandler=x,f.default=x}(b)),b}export{R as r};
