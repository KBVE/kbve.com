import{r as L}from"./domelementtype.C_FFwB5S.js";var _,S,b={},o={};function A(){if(_)return o;_=1;var e,t=o&&o.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),n=o&&o.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.cloneNode=o.hasChildren=o.isDocument=o.isDirective=o.isComment=o.isText=o.isCDATA=o.isTag=o.Element=o.Document=o.CDATA=o.NodeWithChildren=o.ProcessingInstruction=o.Comment=o.Text=o.DataNode=o.Node=void 0;var r=L(),i=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),x(this,e)},e}();o.Node=i;var a=function(e){function n(t){var n=e.call(this)||this;return n.data=t,n}return t(n,e),Object.defineProperty(n.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),n}(i);o.DataNode=a;var s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Text,t}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),n}(a);o.Text=s;var u=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Comment,t}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),n}(a);o.Comment=u;var c=function(e){function n(t,n){var o=e.call(this,n)||this;return o.name=t,o.type=r.ElementType.Directive,o}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),n}(a);o.ProcessingInstruction=c;var l=function(e){function n(t){var n=e.call(this)||this;return n.children=t,n}return t(n,e),Object.defineProperty(n.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),n}(i);o.NodeWithChildren=l;var p=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.CDATA,t}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),n}(l);o.CDATA=p;var d=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.ElementType.Root,t}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),n}(l);o.Document=d;var f=function(e){function n(t,n,o,i){void 0===o&&(o=[]),void 0===i&&(i="script"===t?r.ElementType.Script:"style"===t?r.ElementType.Style:r.ElementType.Tag);var a=e.call(this,o)||this;return a.name=t,a.attribs=n,a.type=i,a}return t(n,e),Object.defineProperty(n.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,o;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(o=e["x-attribsPrefix"])||void 0===o?void 0:o[t]}}))},enumerable:!1,configurable:!0}),n}(l);function h(e){return(0,r.isTag)(e)}function y(e){return e.type===r.ElementType.CDATA}function m(e){return e.type===r.ElementType.Text}function b(e){return e.type===r.ElementType.Comment}function v(e){return e.type===r.ElementType.Directive}function g(e){return e.type===r.ElementType.Root}function x(e,t){var o;if(void 0===t&&(t=!1),m(e))o=new s(e.data);else if(b(e))o=new u(e.data);else if(h(e)){var r=t?T(e.children):[],i=new f(e.name,n({},e.attribs),r);r.forEach((function(e){return e.parent=i})),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=n({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=n({},e["x-attribsPrefix"])),o=i}else if(y(e)){r=t?T(e.children):[];var a=new p(r);r.forEach((function(e){return e.parent=a})),o=a}else if(g(e)){r=t?T(e.children):[];var l=new d(r);r.forEach((function(e){return e.parent=l})),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),o=l}else{if(!v(e))throw new Error("Not implemented yet: ".concat(e.type));var x=new c(e.name,e.data);null!=e["x-name"]&&(x["x-name"]=e["x-name"],x["x-publicId"]=e["x-publicId"],x["x-systemId"]=e["x-systemId"]),o=x}return o.startIndex=e.startIndex,o.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(o.sourceCodeLocation=e.sourceCodeLocation),o}function T(e){for(var t=e.map((function(e){return x(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}return o.Element=f,o.isTag=h,o.isCDATA=y,o.isText=m,o.isComment=b,o.isDirective=v,o.isDocument=g,o.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},o.cloneNode=x,o}function R(){return S||(S=1,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var o in e)"default"!==o&&!Object.prototype.hasOwnProperty.call(n,o)&&t(n,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var o=L(),r=A();n(A(),e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function e(e,t,n){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=i),"object"==typeof e&&(t=e,e=void 0),this.callback=e??null,this.options=t??i,this.elementCB=n??null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?o.ElementType.Tag:void 0,i=new r.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===o.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new r.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment)this.lastNode.data+=e;else{var t=new r.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new r.Text(""),t=new r.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new r.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=a,e.default=a}(b)),b}export{R as r};