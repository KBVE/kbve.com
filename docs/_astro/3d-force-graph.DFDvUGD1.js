import{D as R,R as L,A as T,a as S}from"./three.BMLrZlci.js";import{t as E}from"./three-forcegraph.DPtqh7pT.js";import{t as D}from"./three-render-objects.W7a_6yn9.js";import{i as I}from"./accessor-fn.DXlyMOTY.js";import{i as N}from"./kapsule.DoQQNCoE.js";function F(n,r){r===void 0&&(r={});var e=r.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",e==="top"&&t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),l.styleSheet?l.styleSheet.cssText=n:l.appendChild(document.createTextNode(n))}}var z=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;F(z);function C(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function U(n){if(Array.isArray(n))return C(n)}function v(n,r,e){return(r=H(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function G(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function M(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),e.push.apply(e,t)}return e}function y(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?P(Object(e),!0).forEach(function(t){v(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function j(n){return U(n)||G(n)||V(n)||M()}function B(n,r){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function H(n){var r=B(n,"string");return typeof r=="symbol"?r:r+""}function V(n,r){if(n){if(typeof n=="string")return C(n,r);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?C(n,r):void 0}}function A(n,r){var e=new r;return e._destructor&&e._destructor(),{linkProp:function(l){return{default:e[l](),onChange:function(s,c){c[n][l](s)},triggerUpdate:!1}},linkMethod:function(l){return function(f){for(var s=f[n],c=arguments.length,u=new Array(c>1?c-1:0),a=1;a<c;a++)u[a-1]=arguments[a];var i=s[l].apply(s,u);return i===s?this:i}}}}var k=window.THREE?window.THREE:{AmbientLight:T,DirectionalLight:S,REVISION:L},q=170,w=A("forceGraph",E),K=Object.assign.apply(Object,j(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return v({},n,w.linkProp(n))}))),W=Object.assign.apply(Object,j(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return v({},n,w.linkMethod(n))}))),_=A("renderObjs",D),Z=Object.assign.apply(Object,j(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return v({},n,_.linkProp(n))}))),$=Object.assign.apply(Object,j(["lights","cameraPosition","postProcessingComposer"].map(function(n){return v({},n,_.linkMethod(n))})).concat([{graph2ScreenCoords:_.linkMethod("getScreenCoords"),screen2GraphCoords:_.linkMethod("getSceneCoords")}])),ne=N({props:y(y({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(r,e){return e.renderObjs.lineHoverPrecision(r)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(r,e){var t=e.renderObjs.controls();t&&(t.enabled=r,r&&t.domElement&&t.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},K),Z),methods:y(y({zoomToFit:function(r,e,t){for(var l,f=arguments.length,s=new Array(f>3?f-3:0),c=3;c<f;c++)s[c-3]=arguments[c];return r.renderObjs.fitToBbox((l=r.forceGraph).getGraphBbox.apply(l,s),e,t),this},pauseAnimation:function(r){return r.animationFrameRequestId!==null&&(cancelAnimationFrame(r.animationFrameRequestId),r.animationFrameRequestId=null),this},resumeAnimation:function(r){return r.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(r){r.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),r.forceGraph.tickFrame(),r.renderObjs.tick(),r.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(r){return r.renderObjs.scene()},camera:function(r){return r.renderObjs.camera()},renderer:function(r){return r.renderObjs.renderer()},controls:function(r){return r.renderObjs.controls()},tbControls:function(r){return r.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},W),$),stateInit:function(r){var e=r.controlType,t=r.rendererConfig,l=r.extraRenderers,f=new E;return{forceGraph:f,renderObjs:D({controlType:e,rendererConfig:t,extraRenderers:l}).objects([f]).lights([new k.AmbientLight(13421772,Math.PI),new k.DirectionalLight(16777215,.6*Math.PI)])}},init:function(r,e){r.innerHTML="",r.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";var t=document.createElement("div");e.container.appendChild(t),e.renderObjs(t);var l=e.renderObjs.camera(),f=e.renderObjs.renderer(),s=e.renderObjs.controls();s.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=l.position.z;var c;e.container.appendChild(c=document.createElement("div")),c.className="graph-info-msg",c.textContent="",e.forceGraph.onLoading(function(){c.textContent="Loading..."}).onFinishLoading(function(){c.textContent=""}).onUpdate(function(){e.graphData=e.forceGraph.graphData(),l.position.x===0&&l.position.y===0&&l.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(l.lookAt(e.forceGraph.position),e.lastSetCameraZ=l.position.z=Math.cbrt(e.graphData.nodes.length)*q)}).onFinishUpdate(function(){if(e._dragControls){var u=e.graphData.nodes.find(function(i){return i.__initialFixedPos&&!i.__disposeControlsAfterDrag});u?u.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0}if(e.enableNodeDrag&&e.enablePointerInteraction&&e.forceEngine==="d3"){var a=e._dragControls=new R(e.graphData.nodes.map(function(i){return i.__threeObj}).filter(function(i){return i}),l,f.domElement);a.addEventListener("dragstart",function(i){s.enabled=!1,i.object.__initialPos=i.object.position.clone(),i.object.__prevPos=i.object.position.clone();var o=b(i.object).__data;!o.__initialFixedPos&&(o.__initialFixedPos={fx:o.fx,fy:o.fy,fz:o.fz}),!o.__initialPos&&(o.__initialPos={x:o.x,y:o.y,z:o.z}),["x","y","z"].forEach(function(d){return o["f".concat(d)]=o[d]}),f.domElement.classList.add("grabbable")}),a.addEventListener("drag",function(i){var o=b(i.object);if(!i.object.hasOwnProperty("__graphObjType")){var d=i.object.__initialPos,h=i.object.__prevPos,g=i.object.position;o.position.add(g.clone().sub(h)),h.copy(g),g.copy(d)}var p=o.__data,m=o.position,x={x:m.x-p.x,y:m.y-p.y,z:m.z-p.z};["x","y","z"].forEach(function(O){return p["f".concat(O)]=p[O]=m[O]}),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),p.__dragged=!0,e.onNodeDrag(p,x)}),a.addEventListener("dragend",function(i){delete i.object.__initialPos,delete i.object.__prevPos;var o=b(i.object).__data;o.__disposeControlsAfterDrag&&(a.dispose(),delete o.__disposeControlsAfterDrag);var d=o.__initialFixedPos,h=o.__initialPos,g={x:h.x-o.x,y:h.y-o.y,z:h.z-o.z};d&&(["x","y","z"].forEach(function(p){var m="f".concat(p);d[m]===void 0&&delete o[m]}),delete o.__initialFixedPos,delete o.__initialPos,o.__dragged&&(delete o.__dragged,e.onNodeDragEnd(o,g))),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),f.domElement.classList.remove("grabbable")})}}),k.REVISION<155&&(e.renderObjs.renderer().useLegacyLights=!1),e.renderObjs.hoverOrderComparator(function(u,a){var i=b(u);if(!i)return 1;var o=b(a);if(!o)return-1;var d=function(g){return g.__graphObjType==="node"};return d(o)-d(i)}).tooltipContent(function(u){var a=b(u);return a&&I(e["".concat(a.__graphObjType,"Label")])(a.__data)||""}).hoverDuringDrag(!1).onHover(function(u){var a=b(u);if(a!==e.hoverObj){var i=e.hoverObj?e.hoverObj.__graphObjType:null,o=e.hoverObj?e.hoverObj.__data:null,d=a?a.__graphObjType:null,h=a?a.__data:null;if(i&&i!==d){var g=e["on".concat(i==="node"?"Node":"Link","Hover")];g&&g(null,o)}if(d){var p=e["on".concat(d==="node"?"Node":"Link","Hover")];p&&p(h,i===d?o:null)}f.domElement.classList[a&&e["on".concat(d==="node"?"Node":"Link","Click")]||!a&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=a}}).clickAfterDrag(!1).onClick(function(u,a){var i=b(u);if(i){var o=e["on".concat(i.__graphObjType==="node"?"Node":"Link","Click")];o&&o(i.__data,a)}else e.onBackgroundClick&&e.onBackgroundClick(a)}).onRightClick(function(u,a){var i=b(u);if(i){var o=e["on".concat(i.__graphObjType==="node"?"Node":"Link","RightClick")];o&&o(i.__data,a)}else e.onBackgroundRightClick&&e.onBackgroundRightClick(a)}),this._animationCycle()}});function b(n){for(var r=n;r&&!r.hasOwnProperty("__graphObjType");)r=r.parent;return r}export{ne as _};
