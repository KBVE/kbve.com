import{p as t}from"./@nanostores.J-Z5GVtw.js";import{s as c}from"./supabaseClient.BT68OKvR.js";import{a}from"./nanostores.Bo9-_MAV.js";const o=a(null),n=a(null),u=t("user:id",void 0),i=t("user:email",void 0),m=t("user:username",void 0),A=a(!0),p=a(""),r=t("user:balance",void 0);async function _(){const{data:s}=await c.auth.getUser();if(s?.user){o.set(s.user),u.set(s.user.id??void 0),i.set(s.user.email??void 0);const e=s.user.user_metadata?.username??void 0;n.set(e??null),m.set(e)}else o.set(null),u.set(void 0),i.set(void 0),n.set(null),m.set(void 0)}async function b(s){if(!s){r.set(void 0);return}const{data:e,error:l}=await c.from("user_balances_view").select("user_id, username, role, credits, khash, level, created_at").eq("user_id",s).single();e&&!l?r.set(e):r.set(void 0)}export{n as a,A as b,p as c,b as d,u as e,r as f,_ as s,o as u};
