<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.4.0"><title>Phaser Demo</title><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script><!--

    <script
is:inline
src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"
/>

 --><script type="module">
  
    import flowbite from 'https://cdn.jsdelivr.net/npm/flowbite@2.3.0/+esm'
    window.flowbite = flowbite;

    const reloadFlowbite = () => {
        import('https://cdn.jsdelivr.net/npm/flowbite@2.3.0/+esm')
            .then(({ initFlowbite }) => {
                initFlowbite();
            })
            .catch(error => console.error('Error loading Flowbite:', error));
        };


    document.addEventListener('astro:page-load', () => {
        reloadFlowbite()
    });
</script><script type="module" src="https://unpkg.com/@dotlottie/player-component@1.0.0/dist/dotlottie-player.js"></script><link rel="stylesheet" href="/_astro/_id_.C-IptgeU.css" />
<style>:root{--color-kbve-menu-bg-dyn: #fff333;--accent: 136, 58, 234;--accent-light: 224, 204, 250;--accent-dark: 49, 10, 101;--accent-gradient: linear-gradient( 45deg, rgb(var(--accent)), rgb(var(--accent-light)) 30%, white 60% )}code{font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
.link-card[data-astro-cid-khjwmru5]{list-style:none;display:flex;padding:1px;background-color:#23262d;background-image:none;background-size:400%;border-radius:7px;background-position:100%;transition:background-position .6s cubic-bezier(.22,1,.36,1);box-shadow:inset 0 0 0 1px #ffffff1a}.link-card[data-astro-cid-khjwmru5]>a[data-astro-cid-khjwmru5]{width:100%;text-decoration:none;line-height:1.4;padding:calc(1.5rem - 1px);border-radius:8px;color:#fff;background-color:#23262d;opacity:.8}h2[data-astro-cid-khjwmru5]{margin:0;font-size:1.25rem;transition:color .6s cubic-bezier(.22,1,.36,1)}p[data-astro-cid-khjwmru5]{margin-top:.5rem;margin-bottom:0}.link-card[data-astro-cid-khjwmru5]:is(:hover,:focus-within){background-position:0;background-image:var(--accent-gradient)}.link-card[data-astro-cid-khjwmru5]:is(:hover,:focus-within) h2[data-astro-cid-khjwmru5]{color:rgb(var(--accent-light))}
</style><script type="module" src="/_astro/hoisted.drCUOguG.js"></script>
<script type="module" src="/_astro/page.9eHGTb9p.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[])})(window,'partytown','forward');/* Partytown 0.8.1 - MIT builder.io */
!function(t,e,n,i,o,r,a,s,d,c,l,p){function u(){p||(p=1,"/"==(a=(r.lib||"/~partytown/")+(r.debug?"debug/":""))[0]&&(d=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(s=setTimeout(f,1e4),e.addEventListener("pt0",w),o?h(1):n.serviceWorker?n.serviceWorker.register(a+(r.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):f())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.style.display="block",c.style.width="0",c.style.height="0",c.style.border="0",c.style.visibility="hidden",c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.8.1":"sandbox-sw.html?"+Date.now()),e.querySelector(r.sandboxParent||"body").appendChild(c)}function f(n,o){for(w(),i==t&&(r.forward||[]).map((function(e){delete t[e.split(".")[0]]})),n=0;n<d.length;n++)(o=e.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=r.nonce,e.head.appendChild(o);c&&c.parentNode.removeChild(c)}function w(){clearTimeout(s)}r=t.partytown||{},i==t&&(r.forward||[]).map((function(e){l=t,e.split(".").map((function(e,n,i){l=l[i[n]]=n+1<i.length?"push"==i[n+1]?[]:l[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);</script><style>[data-astro-transition-scope="astro-rxefxzo4-1"] { view-transition-name: astro-rxefxzo4-1; }@layer astro { ::view-transition-old(astro-rxefxzo4-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(astro-rxefxzo4-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(astro-rxefxzo4-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(astro-rxefxzo4-1) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-rxefxzo4-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-rxefxzo4-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-rxefxzo4-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-rxefxzo4-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-rxefxzo4-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-rxefxzo4-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-rxefxzo4-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-rxefxzo4-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <div class="h-screen w-full bg-zinc-950 relative flex overflow-hidden"> <div class="w-full h-full flex flex-col justify-between"> <main class="max-w-full h-full flex relative overflow-y-hidden" data-astro-transition-scope="astro-rxefxzo4-1"> <div class="h-full w-full justify-start rounded-tl flex flex-wrap gap-4 overflow-y-scroll content-start p-3 ">  <section class="flex-auto w-full md:w-6/12 p-5 bg-[#c0987d] border border-cyan-200 rounded-lg shadow bg-default bg-cover bg-blend-overlay" style="background-image: url('https://utfs.io/f/ae961975-ad95-4247-91cc-2c573d6fbe3e-1t0m0l.webp')"> <script type="module" src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/+esm"></script> <script type="module" src="https://cdn.jsdelivr.net/npm/grid-engine@2.44.2/+esm"></script> <!--
    *! We can remove this
    <script is:inline src="
https://cdn.jsdelivr.net/npm/grid-engine@2.44.2/dist/GridEngine.min.js
"></script> --><astro-phaser data-scene="/embed/js/phaser/fish/TownScene.js"> <div id="astro-phaser-container" widget="header:embed:phaser" scene="/embed/js/phaser/fish/TownScene.js"></div> </astro-phaser>  <script type="module">

    import * as Phaser from 'https://cdn.jsdelivr.net/npm/phaser@3.80.1/+esm';
    window.Phaser = Phaser;

    import GridEngine from 'https://cdn.jsdelivr.net/npm/grid-engine@2.44.2/+esm';
    window.GridEngine = GridEngine;     // We had some issues with the capital and lowercase but have resolved it. window.gridEngine = GridEngine;


    class AstroPhaser extends HTMLElement {
        constructor() {
            super();
            const scene = this.dataset.scene;
            window.addEventListener('load', (event) => {
            this.initPhaser(scene)
            });

        }

        async initPhaser(scene) {
            const _phaserContainer = document.getElementById('astro-phaser-container');

            if (Phaser && GridEngine) {

                // This is for Debugging.
                //console.log('Phaser Engine Found');
                //console.log(`${Phaser.VERSION}`);

                // Initialize a Phaser game instance
                //  Game Configuration
                const config = {
                    title: "TownEngine", // Title for the Game
                    render: {
                        antialias: false,
                    }, // Anti Alias
                    type: Phaser.AUTO,
                    parent: _phaserContainer,

                    scale: {

                        mode: Phaser.Scale.FIT,
                        autoCenter: Phaser.Scale.CENTER_BOTH,

                        min: {
                            width: 720,
                            height: 528,
                        }
                    },
                    transparent: true,
                    //backgroundColor: '#c0987d', //#4488aa

                    plugins: {
                     scene: [
                         {
                         key: "gridEngine",
                         plugin: GridEngine,
                         mapping: "gridEngine",
                         },
                    ],


                    },
                    //  This physics engine may have to be removed.
                    physics: {
                        default: 'arcade',
                        arcade: {
                            gravity: { y: 0 } // No gravity
                        }
                    },
                    scene: {
                        preload: function() {
                            this.load.image('mainBg', 'https://utfs.io/f/2c17f660-7f39-4edf-b83e-122a71014d99-6gflls.webp'); // Ensure you have a correct path to your logo image
                            this.load.sceneFile('TownScene', `${scene}`);
                            this.load.image('scroll', '/assets/img/fishchip/scroll.webp');
                            this.load.audio('music', '/assets/img/fishchip/bg.ogg');
                        },
                        create: function() {
                            if (!this.sound.get('music')?.isPlaying) {
                              this.sound.add('music', { loop: true, volume: 0.1 }).play();
                            }
                            this.add.image(480, 480, 'mainBg').setScale(0.1);

                            this.mainMenuButtonImage = this.add.image(480, 480, 'scroll').setAlpha(0.9).setScale(0.7, 0.2).setInteractive({ useHandCursor: true });

                            this.mainMenuButtonText = this.add.text(480, 480, 'Start Game', {
                                fontFamily: 'Arial Black', fontSize: 50, color: '#ffffff', stroke: '#000000', strokeThickness: 6,
                            }).setOrigin(0.5).setInteractive({ useHandCursor: true });
                            this.mainMenuButtonText.on('pointerdown', () => {
                                this.scene.start('TownScene');
                            }, this);


                        }
                    },
                    // Input - prevent Wheel and touch capture
                    input: {
                        mouse: {
                            preventDefaultWheel: false
                        },
                        touch: {
                            capture: false
                        }
                    }

                };

                    const game =  new Phaser.Game(config);
            } else {
                console.log('Phaser not found');
            }
        }
    }

    customElements.define('astro-phaser', AstroPhaser);

</script> </section>  </div> </main> </div> </div>  </html>