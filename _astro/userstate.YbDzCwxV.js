import{p as t}from"./@nanostores.BsSnFId4.js";import{c as r}from"./@supabase.d6fxE5ud.js";import{a}from"./nanostores.Bo9-_MAV.js";const i="https://qmpdruitzlownnnnjmpk.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtcGRydWl0emxvd25ubm5qbXBrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NjA0NTYsImV4cCI6MjA2NTIzNjQ1Nn0.OhD3qN4dq0TMA65qVGvry_QsZEeLKK7RbwYP3QzAvcY",A=typeof window<"u"?(window.supabase||(window.supabase=r(i,o),p(),window.supabase.auth.onAuthStateChange(()=>{p()})),window.supabase):r(i,o),u=a(null),c=a(null),d=t("user:id",void 0),m=t("user:email",void 0),l=t("user:username",void 0),h=a(!0),y=a("");function v(e){return e?JSON.stringify(e):""}function w(e){return e?JSON.parse(e):void 0}const n=t("user:balance",void 0,{encode:v,decode:w});async function p(){const{data:e}=await A.auth.getUser();if(e?.user){u.set(e.user),d.set(e.user.id??void 0),m.set(e.user.email??void 0);const s=e.user.user_metadata?.username??void 0;c.set(s??null),l.set(s)}else u.set(null),d.set(void 0),m.set(void 0),c.set(null),l.set(void 0)}async function S(e){if(!e){n.set(void 0);return}const{data:s,error:f}=await A.from("user_balances_view").select("user_id, username, role, credits, khash, level, created_at").eq("user_id",e).single();s&&!f?n.set(s):n.set(void 0)}export{n as a,A as b,u as c,p as d,c as e,h as f,y as g,S as s,d as u};
