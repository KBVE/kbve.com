import{C as l,D as g,S as w,F as f,A as d,Q as m}from"./sdk.99f24ef6.js";import{F as i,B as c,E as e}from"./storage.62890bbb.js";import{a as p}from"./index.ae223c1e.js";const a=new l().setEndpoint("https://panel.kbve.com/v1").setProject("kbve"),h=new g(a);new w(a);const $=new f(a),n=new d(a),o=p(void 0);n.getSession("current").then(function(t){o.set(t)},function(t){o.set(void 0)});const y=p(void 0);o.subscribe(async t=>{t?.userId&&y.set(await u())});const D=async(t,r)=>{try{const s=await n.createEmailSession(t,r);o.set(s)}catch(s){throw s}},F=async()=>{try{const t=o.get();console.log(t),t?.$id&&(await n.deleteSession(t?.$id),o.set(void 0))}catch(t){throw t}},u=async()=>{try{return n.get()}catch(t){throw t.message}},k=async()=>{try{const t=await u();return t?.$id&&(e("email",String(t?.email)),e("uuid",String(t?.$id)),e("last",String(t?.$updatedAt)),e("emailVerification",String(t?.emailVerification)),e("phoneVerification",String(t?.phoneVerification)),e("phone",String(t?.phone))),!0}catch{return!1}},A=async()=>{try{i("[FETCH] -> Profile"),i(c.get().uuid);const t=await h.listDocuments("user","profile",[m.equal("uuid",c.get().uuid)]),{documents:r,total:s}=t;return s<1?!1:(e("username",r[0]?.username),e("bio",r[0]?.bio),e("pgp",r[0]?.pgp),!0)}catch{return!1}};export{$ as a,D as b,A as f,k as g,F as l};
