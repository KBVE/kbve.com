import{a as w}from"./react.CvslfkeK.js";var A={},L={},S={},P;function ie(){if(P)return S;P=1,Object.defineProperty(S,"__esModule",{value:!0}),S.useUnityCanvasId=void 0;var c=w(),d=0,i="react-unity-webgl-canvas",v=function(f){if(f.id!==void 0)return f.id;var m=(0,c.useMemo)(function(){return[i,++d].join("-")},[]);return m};return S.useUnityCanvasId=v,S}var g={},M={},F;function J(){if(F)return M;F=1,Object.defineProperty(M,"__esModule",{value:!0}),M.UnityLoaderStatus=void 0;var c;return function(d){d.Idle="Idle",d.Loading="Loading",d.Loaded="Loaded",d.Error="Error"}(c||(M.UnityLoaderStatus=c={})),M}var p={},B;function R(){return B||(B=1,Object.defineProperty(p,"__esModule",{value:!0}),p.isBrowserEnvironment=void 0,p.isBrowserEnvironment=typeof window<"u"&&typeof document<"u"),p}var $;function se(){if($)return g;$=1;var c=g&&g.__awaiter||function(b,o,n,e){function s(r){return r instanceof n?r:new n(function(t){t(r)})}return new(n||(n=Promise))(function(r,t){function l(a){try{u(e.next(a))}catch(y){t(y)}}function U(a){try{u(e.throw(a))}catch(y){t(y)}}function u(a){a.done?r(a.value):s(a.value).then(l,U)}u((e=e.apply(b,o||[])).next())})},d=g&&g.__generator||function(b,o){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,s,r,t=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return t.next=l(0),t.throw=l(1),t.return=l(2),typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function l(u){return function(a){return U([u,a])}}function U(u){if(e)throw new TypeError("Generator is already executing.");for(;t&&(t=0,u[0]&&(n=0)),n;)try{if(e=1,s&&(r=u[0]&2?s.return:u[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,u[1])).done)return r;switch(s=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){n.label=u[1];break}if(u[0]===6&&n.label<r[1]){n.label=r[1],r=u;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(u);break}r[2]&&n.ops.pop(),n.trys.pop();continue}u=o.call(b,n)}catch(a){u=[6,a],s=0}finally{e=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(g,"__esModule",{value:!0}),g.useUnityInstance=void 0;var i=w(),v=J(),f=R(),m=function(b,o,n,e){(0,i.useEffect)(function(){(function(){return c(void 0,void 0,void 0,function(){var s,r;return d(this,function(t){switch(t.label){case 0:if(f.isBrowserEnvironment===!1)return[2];if(b!==v.UnityLoaderStatus.Loaded||o===null)return e.setUnityInstance(null),e.setInitialisationError(null),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.createUnityInstance(o,n,e.setLoadingProgression)];case 2:return s=t.sent(),e.setUnityInstance(s),e.setInitialisationError(null),[3,4];case 3:return r=t.sent(),e.setUnityInstance(null),e.setInitialisationError(r),[3,4];case 4:return[2]}})})})()},[b,o,n,e])};return g.useUnityInstance=m,g}var q={},T;function ue(){if(T)return q;T=1,Object.defineProperty(q,"__esModule",{value:!0}),q.useUnityArguments=void 0;var c=w(),d=function(i){return(0,c.useMemo)(function(){return{dataUrl:i.unityProvider.unityConfig.dataUrl,frameworkUrl:i.unityProvider.unityConfig.frameworkUrl,codeUrl:i.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:i.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:i.unityProvider.unityConfig.memoryUrl,symbolsUrl:i.unityProvider.unityConfig.symbolsUrl,workerUrl:i.unityProvider.unityConfig.workerUrl,companyName:i.unityProvider.unityConfig.companyName,productName:i.unityProvider.unityConfig.productName,productVersion:i.unityProvider.unityConfig.productVersion,webglContextAttributes:i.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:i.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:i.devicePixelRatio||1,autoSyncPersistentDataPath:i.autoSyncPersistentDataPath,matchWebGLToCanvasSize:typeof i.matchWebGLToCanvasSize=="boolean"?i.matchWebGLToCanvasSize:!0,disabledCanvasEvents:i.disabledCanvasEvents||["contextmenu","dragstart"],print:function(v){},printErr:function(v){}}},[])};return q.useUnityArguments=d,q}var k={},G;function oe(){if(G)return k;G=1,Object.defineProperty(k,"__esModule",{value:!0}),k.useUnityLoader=void 0;var c=w(),d=R(),i=J(),v=function(f){var m=(0,c.useState)(i.UnityLoaderStatus.Loading),b=m[0],o=m[1];return(0,c.useEffect)(function(){if(d.isBrowserEnvironment!==!1){if(f.loaderUrl===null){o(i.UnityLoaderStatus.Idle);return}var n=window.document.querySelector('script[src="'.concat(f.loaderUrl,'"]'));n===null?(n=window.document.createElement("script"),n.type="text/javascript",n.src=f.loaderUrl,n.async=!0,n.setAttribute("data-status","loading"),window.document.body.appendChild(n),n.addEventListener("load",function(){return n?.setAttribute("data-status","loaded")}),n.addEventListener("error",function(){return n?.setAttribute("data-status","error")})):o(n.getAttribute("data-status")==="loaded"?i.UnityLoaderStatus.Loaded:i.UnityLoaderStatus.Error);var e=function(s){return o(s.type==="load"?i.UnityLoaderStatus.Loaded:i.UnityLoaderStatus.Error)};return n.addEventListener("load",e),n.addEventListener("error",e),function(){n!==null&&(n.removeEventListener("load",e),n.removeEventListener("error",e),window.document.body.removeChild(n))}}},[f.loaderUrl]),b};return k.useUnityLoader=v,k}var D;function ce(){if(D)return L;D=1,Object.defineProperty(L,"__esModule",{value:!0}),L.Unity=void 0;var c=w(),d=w(),i=ie(),v=se(),f=ue(),m=oe(),b=(0,d.forwardRef)(function(o,n){var e=(0,d.useRef)(null),s=(0,i.useUnityCanvasId)(o),r=(0,f.useUnityArguments)(o),t=(0,m.useUnityLoader)(o.unityProvider.unityConfig);return(0,v.useUnityInstance)(t,e.current,r,o.unityProvider),(0,c.useImperativeHandle)(n,function(){return e.current}),(0,c.createElement)("canvas",{ref:e,id:s,style:o.style,className:o.className,tabIndex:o.tabIndex})});return L.Unity=b,L}var h={},N={},z;function K(){if(z)return N;z=1,Object.defineProperty(N,"__esModule",{value:!0}),N.errorMessages=void 0;var c={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"};return N.errorMessages=c,N}var E={},V;function le(){if(V)return E;V=1;var c=E&&E.__spreadArray||function(o,n,e){if(e||arguments.length===2)for(var s=0,r=n.length,t;s<r;s++)(t||!(s in n))&&(t||(t=Array.prototype.slice.call(n,0,s)),t[s]=n[s]);return o.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(E,"__esModule",{value:!0}),E.useEventSystem=void 0;var d=w(),i=K(),v=R(),f=[],m=function(o){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var s=void 0;return f.forEach(function(r){s=r.apply(void 0,c([o],n,!1))}),s};v.isBrowserEnvironment===!0&&(window.dispatchReactUnityEvent=m);var b=function(){var o=(0,d.useRef)([]),n=(0,d.useCallback)(function(r,t){o.current=c(c([],o.current,!0),[{eventName:r,callback:t}],!1)},[o]),e=(0,d.useCallback)(function(r,t){o.current=o.current.filter(function(l){return l.eventName!==r&&l.callback!==t})},[o]),s=(0,d.useCallback)(function(r){for(var t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var U=o.current.find(function(u){return u.eventName===r});if(typeof U>"u"){console.warn(i.errorMessages.noEventListener,{eventName:r});return}return U.callback.apply(U,t)},[o]);return(0,d.useEffect)(function(){return f.push(s),function(){f.splice(f.indexOf(s),1)}},[s]),{addEventListener:n,removeEventListener:e}};return E.useEventSystem=b,E}var x={},W;function de(){if(W)return x;W=1,Object.defineProperty(x,"__esModule",{value:!0}),x.useNullableState=void 0;var c=w(),d=function(i){return(0,c.useState)(i||null)};return x.useNullableState=d,x}var Q;function ve(){if(Q)return h;Q=1;var c=h&&h.__awaiter||function(o,n,e,s){function r(t){return t instanceof e?t:new e(function(l){l(t)})}return new(e||(e=Promise))(function(t,l){function U(y){try{a(s.next(y))}catch(C){l(C)}}function u(y){try{a(s.throw(y))}catch(C){l(C)}}function a(y){y.done?t(y.value):r(y.value).then(U,u)}a((s=s.apply(o,n||[])).next())})},d=h&&h.__generator||function(o,n){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,r,t,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=U(0),l.throw=U(1),l.return=U(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function U(a){return function(y){return u([a,y])}}function u(a){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(e=0)),e;)try{if(s=1,r&&(t=a[0]&2?r.return:a[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,a[1])).done)return t;switch(r=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,r=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){e.label=a[1];break}if(a[0]===6&&e.label<t[1]){e.label=t[1],t=a;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(a);break}t[2]&&e.ops.pop(),e.trys.pop();continue}a=n.call(o,e)}catch(y){a=[6,y],r=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(h,"__esModule",{value:!0}),h.useUnityContext=void 0;var i=w(),v=K(),f=le(),m=de(),b=function(o){var n=(0,m.useNullableState)(),e=n[0],s=n[1],r=(0,i.useState)(0),t=r[0],l=r[1],U=(0,i.useState)(!1),u=U[0],a=U[1],y=(0,m.useNullableState)(),C=y[0],X=y[1],O=(0,f.useEventSystem)(),Y=(0,i.useRef)({setLoadingProgression:l,setInitialisationError:X,setUnityInstance:s,setIsLoaded:a,unityConfig:o}),Z=(0,i.useCallback)(function(_){if(e===null){console.warn(v.errorMessages.requestFullscreenNoUnityInstance);return}e.SetFullscreen(_===!0?1:0)},[e]),ee=(0,i.useCallback)(function(){if(e===null||typeof e.Module.canvas>"u"){console.warn(v.errorMessages.requestPointerLockNoUnityInstanceOrCanvas);return}return e.Module.canvas.requestPointerLock()},[e]),te=(0,i.useCallback)(function(_,I,ae){if(e===null){console.warn(v.errorMessages.sendMessageNoUnityInstance);return}e.SendMessage(_,I,ae)},[e]),ne=(0,i.useCallback)(function(_,I){if(e===null||typeof e.Module.canvas>"u"){console.warn(v.errorMessages.screenshotNoUnityInstanceOrCanvas);return}return e.Module.canvas.toDataURL(_,I)},[e]),j=(0,i.useCallback)(function(){return e===null?(console.warn(v.errorMessages.quitNoUnityInstance),Promise.reject()):e.Quit()},[e]),re=(0,i.useCallback)(function(){return c(void 0,void 0,void 0,function(){var _;return d(this,function(I){switch(I.label){case 0:return e===null||typeof e.Module.canvas>"u"?(console.warn(v.errorMessages.genericNoUnityInstance),[2,Promise.reject()]):(_=e.Module.canvas,document.body.appendChild(_),_.style.display="none",[4,j()]);case 1:return I.sent(),_.remove(),[2]}})})},[e]);return(0,i.useEffect)(function(){a(t===1)},[t]),{unityProvider:Y.current,loadingProgression:t,initialisationError:C,isLoaded:u,UNSAFE__unityInstance:e,requestFullscreen:Z,requestPointerLock:ee,sendMessage:te,takeScreenshot:ne,unload:j,UNSAFE__detachAndUnloadImmediate:re,addEventListener:O.addEventListener,removeEventListener:O.removeEventListener}};return h.useUnityContext=b,h}var H;function fe(){return H||(H=1,function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.useUnityContext=c.Unity=void 0;var d=ce();Object.defineProperty(c,"Unity",{enumerable:!0,get:function(){return d.Unity}});var i=ve();Object.defineProperty(c,"useUnityContext",{enumerable:!0,get:function(){return i.useUnityContext}})}(A)),A}var Ue=fe();export{Ue as e};
